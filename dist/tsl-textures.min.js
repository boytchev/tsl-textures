/*! TSL Textures v2.0.0 */
import{Fn as a,min as e,sub as r,max as o,vec3 as l,float as s,add as d,If as t,select as n,sin as u,cos as m,vec4 as i,mul as c,cross as v,remap as g,pow as V,log2 as b,mat4 as f,smoothstep as p,positionGeometry as w,dFdx as y,dFdy as h,transformNormalToView as z,mx_noise_float as x,uniform as k,exp as A,round as $,pow2 as M,abs as I,or as P,mix as T,acos as S,clamp as E,normalLocal as B,tangentLocal as C,Loop as W,floor as G,oneMinus as q,equirectUV as L,div as R,remapClamp as F,sqrt as N,mod as D,distance as Y,radians as U,matcapUV as O,mx_worley_noise_float as j,sign as H,tan as _,reciprocal as K}from"three/tsl";export{mx_noise_float as noise}from"three/tsl";import{Color as Z,Vector3 as J,Vector2 as Q}from"three";const X=a((([a,l,s,d])=>{var t=d.add(a.mul(12)).mod(12),n=l.mul(e(s,r(1,s)));return s.sub(n.mul(o(-1,e(e(t.sub(3),r(9,t)),1))))}));X.setLayout({name:"hslHelper",type:"float",inputs:[{name:"h",type:"float"},{name:"s",type:"float"},{name:"l",type:"float"},{name:"n",type:"float"}]});const aa=a((([a,e,r])=>{a=a.fract().add(1).fract(),e=e.clamp(0,1),r=r.clamp(0,1);var o=X(a,e,r,0),s=X(a,e,r,8),d=X(a,e,r,4);return l(o,s,d)}));aa.setLayout({name:"hsl",type:"vec3",inputs:[{name:"h",type:"float"},{name:"s",type:"float"},{name:"l",type:"float"}]});const ea=a((([a])=>{var u=s(a.x).toVar(),m=s(a.y).toVar(),i=s(a.z).toVar(),c=o(u,o(m,i)).toVar(),v=e(u,e(m,i)).toVar(),g=s(0).toVar(),V=s(0).toVar(),b=d(c,v).div(2);return t(v.notEqual(c),(()=>{const a=r(c,v).toVar();V.assign(n(b.lessThanEqual(.5),a.div(d(v,c)),a.div(r(2,d(v,c))))),t(c.equal(u),(()=>{g.assign(r(m,i).div(a).add(n(m.lessThanEqual(i),6,0)))})).ElseIf(c.equal(m),(()=>{g.assign(r(i,u).div(a).add(2))})).Else((()=>{g.assign(r(u,m).div(a).add(4))})),g.divAssign(6)})),l(g,V,b)}));function ra(a){var e={};for(var[r,o]of Object.entries(a))"$"!=r[0]&&(e[r]=o instanceof J?k(o,"vec3"):k(o));return e}const oa=a((([a,e])=>l(u(e).mul(u(a)),m(a),m(e).mul(u(a)))));oa.setLayout({name:"spherical",type:"vec3",inputs:[{name:"phi",type:"float"},{name:"theta",type:"float"}]});const la=a((([a,e])=>{var r=sa(e);return da(a,r)})),sa=a((([a])=>{var e=m(a.x.div(2)),o=m(a.y.div(2)),l=m(a.z.div(2)),s=u(a.x.div(2)),t=u(a.y.div(2)),n=u(a.z.div(2));return i(d(c(s,o,l),c(e,t,n)),r(c(e,t,l),c(s,o,n)),d(c(e,o,n),c(s,t,l)),r(c(e,o,l),c(s,t,n)))})),da=a((([a,e])=>{var r=v(e,a).mul(2).toVar();return d(a,r.mul(e.w),v(e.xyz,r))})),ta=a((([a,e,r,o,l])=>(a=g(a,e,r,0,1),a=V(2,c(a,b(l.div(o))).add(b(o)))))),na=a((([a])=>a.dot(l(12.9898,78.233,-97.5123)).sin().mul(43758.5453).fract().mul(2).sub(1))),ua=a((([a])=>{var e=a.cos().toVar(),r=a.sin().toVar();return f(1,0,0,0,0,e,r,0,0,r.negate(),e,0,0,0,0,1)})),ma=a((([a])=>{var e=a.cos().toVar(),r=a.sin().toVar();return f(e,0,r.negate(),0,0,1,0,0,r,0,e,0,0,0,0,1)})),ia=a((([a])=>{var e=a.cos().toVar(),r=a.sin().toVar();return f(e,r,0,0,r.negate(),e,0,0,0,0,1,0,0,0,0,1)})),ca=a((([a])=>{var e=ua(a.x),r=ma(a.y),o=ia(a.z);return r.mul(e).mul(o)})),va=a((([a])=>f(a.x,0,0,0,0,a.y,0,0,0,0,a.z,0,0,0,0,1))),ga=a((([a])=>f(1,0,0,0,0,1,0,0,0,0,1,0,a.x,a.y,a.z,1))),Va=a((([a,e,r,o])=>{var l=oa(e.x,e.y).mul(o).toVar(),s=r.sub(l.div(2)).sub(a).dot(l).div(l.dot(l)).negate();return p(0,1,s)})),ba=a((a=>{var e=Va(w,a.selectorAngles,a.selectorCenter,a.selectorWidth).sub(.5).mul(2).abs().oneMinus().pow(.25).negate().mul(a.selectorShow);return l(0,e,e)})),fa=a((([a])=>{var e=y(a),r=h(a);return z(v(e,r).normalize())}));var pa=null,wa=10;async function ya(){if(null!=navigator.gpu&&await navigator.gpu.requestAdapter())return;(pa=document.createElement("div")).innerHTML='\n\t<div style="font-size:1.25em; font-weight:bold;">PLEASE, WAIT</div>\n\t<div  style="font-size:0.85em; font-weight:100;" >NO WEBGPU &mdash; TRYING WEBGL2</div>\n\t<div id="counter"></div>\n\t',pa.style.left="calc(50% - 8em)",pa.style.width="16em",pa.style.fontFamily="Bahnschrifts, Arial",pa.style.position="absolute",pa.style.bottom="20px",pa.style.padding="12px 6px",pa.style.border="1px solid white",pa.style.borderRadius="4px",pa.style.background="rgba(0,0,0,0.5)",pa.style.color="white",pa.style.textAlign="center",pa.style.opacity="0.8",pa.style.outline="none",pa.style.zIndex="999",document.body.appendChild(pa)}function ha(){pa&&(wa>0?wa--:(pa.style.display="none",pa=null))}function za(a){for(var e of Object.keys(a))"number"==typeof a[e]?a[e]=s(a[e]):a[e]instanceof Z?a[e]=l(a[e].r,a[e].g,a[e].b):a[e]instanceof J&&(a[e]=l(a[e].x,a[e].y,a[e].z));return a}function xa(a,e=1,r=1,o=0){return x(a.mul(e,r).add(o))}var ka=a((a=>{a=za({...ka.defaults,...a});var e=w.mul(A(a.scale)).add(a.seed).toVar(),r=l(0,0,0).toVar();return t($(x(e,1,.2)).greaterThanEqual(1),(()=>{r.assign(a.colorA)})).ElseIf($(x(e.yzx,1,.3)).greaterThanEqual(1),(()=>{r.assign(a.colorB)})).ElseIf($(x(e.zxy,1,.4)).greaterThanEqual(1),(()=>{r.assign(a.colorC)})).Else((()=>{r.assign(a.colorD)})),r}));ka.defaults={$name:"Camouflage",scale:2,colorA:new Z(12762792),colorB:new Z(10258782),colorC:new Z(9610101),colorD:new Z(7435617),seed:0};var Aa=a((a=>{a=za({...Aa.defaults,...a});var e=w.mul(A(a.scale)).add(a.seed).toVar(),o=x(e,4).sin().toVar(),l=x(e.mul(1.5),4).cos().toVar(),n=A(r(s(3),a.thinness)),u=r(n,M(I(d(o,l))).mul(20)).toVar();return t(P(o.greaterThan(l),u.lessThan(0)),(()=>{u.assign(0)})),t(u.lessThanEqual(0),(()=>{u.assign(a.noise.mul(M(x(e.mul(30)))))})),T(a.background,a.color,u)}));Aa.defaults={$name:"Cave art",scale:2,thinness:2,noise:.3,color:new Z(13845829),background:new Z(16775408),seed:0};var $a=a((a=>{a=za({...$a.defaults,...a});for(var e=w.normalize(),r=S(E(e.y,-1,1)).mul(20),o=A(a.scale.sub(1)),l=r.div(3e3).mul(o),d=s(a.seed.sin().mul(100)).toVar(),t=0;t<=10;t++)d.addAssign(u(l.mul(2**t).sub(Math.PI*t/2)).mul(-t*(t+1)/2));d.assign(d.div(200).clamp(-2,2));var m=ea(a.color),i=m.x.add(d.mul(a.variety)).mod(1).mul(10),c=i.floor(),v=i.sub(c);return v=n(v.lessThan(.5),v.pow(1.5),v.pow(1/1.5)),aa(c.add(v).div(10),m.y,m.z)}));$a.defaults={$name:"Circles",scale:2,variety:1,color:new Z(15786192),seed:0};var Ma=a((a=>{a=za({...Ia.defaults,...a});const e=w,r=A(a.scale.div(1.5).sub(.5)),o=d(xa(e,r,1,a.seed),xa(e,r,2,a.seed).mul(.8),xa(e,r,6,a.seed).mul(.1),xa(e,r,8,a.seed).mul(.07,a.opacity),a.density.remap(0,1,-.5,1.5)),l=E(0,1,c(o,2).pow(1.5).sub(1).mul(a.opacity));return i(T(a.subcolor,a.color,o.clamp(0,1)),l)})),Ia=a((a=>Ma(a).rgb));Ia.opacity=a((a=>Ma(a).a)),Ia.defaults={$name:"Clouds",scale:2,density:.5,opacity:1,color:new Z(16777215),subcolor:new Z(10526896),seed:0};var Pa=a((([a,e,r,o,l])=>{var s=x(a.add(l)).mul(.5).add(.5);return s=r.mul(V(I(s),o)),a.add(s.mul(e))})),Ta=a((a=>{a=za({...Ta.defaults,...a});var e=w.mul(A(a.scale.div(2).add(2))).toVar(),o=B.normalize().toVar(),s=C.normalize().mul(.001).toVar(),d=v(o,s).normalize().mul(.001).toVar(),t=g(a.density,0,1,10,.5).toVar(),n=l(u(a.seed).mul(100),m(a.seed.div(2)).mul(100),u(a.seed.div(3)).mul(100)).toVar(),i=Pa(e,o,a.bump,t,n),c=Pa(e.add(s),o,a.bump,t,n),V=Pa(e.add(d),o,a.bump,t,n),b=r(c,i),f=r(V,i);return z(v(b,f).normalize())}));Ta.defaults={$name:"Concrete",$normalNode:!0,scale:2,density:.5,bump:.5,seed:0};var Sa=a((([a])=>a.add(na(a)))),Ea=a((a=>{a=za({...Ea.defaults,...a});var e=w.mul(A(a.scale.div(1.5).add(1))).add(a.seed).toVar(),r=e.round().toVar(),o=r.toVar(),d=s(1).toVar(),n=l().toVar(),u=s().toVar(),m=s(0).toVar();W(27,(()=>{var s=m.mod(3).sub(1),i=m.div(3).floor().mod(3).sub(1),c=m.div(9).floor().sub(1);n.assign(r.add(l(s,i,c))),u.assign(e.distance(Sa(n))),u.addAssign(x(e.add(n)).div(a.straight.exp())),t(u.lessThan(d),(()=>{d.assign(u),o.assign(n)})),m.addAssign(1)}));var i=x(o.mul(Math.PI)).toVar(),c=x(e.mul(12)).toVar();c.assign(c.sign().mul(c.abs().pow3())),c.addAssign(x(e.mul(40)).div(3));var v=i.add(1).div(2);return T(a.color,a.background,v.add(c.mul(a.noise))).toVar()}));Ea.defaults={$name:"Cork",scale:1,straight:1,noise:.3,color:new Z(16773312),background:new Z(13664352),seed:0};var Ba=a((a=>{a=za({...Ba.defaults,...a});var e=w.mul(A(a.scale)).add(a.seed).sub(1e3).toVar(),r=s(1).toVar(),o=s(1.5).sub(a.density).mul(2).toVar(),l=a.density.mul(5).add(5).toVar();return W(l,(()=>{r.mulAssign(x(e).abs().pow(o).mul(100).sub(50).clamp(0,1).oneMinus()),e.assign(e.mul(1.01)),r.mulAssign(x(e.yzx).abs().pow(o).mul(100).sub(50).clamp(0,1).oneMinus()),e.assign(e.mul(1.01)),r.mulAssign(x(e.zxy).abs().pow(o).mul(100).sub(50).clamp(0,1).oneMinus()),e.assign(e.mul(1.01))})),T(a.background,a.color,r.clamp(0,1))}));Ba.defaults={$name:"Dalmatian spots",$width:260,scale:2,density:.6,color:new Z(16777215),background:new Z(0),seed:0};var Ca=a((([a])=>{var e=a.mul(5**.5).fract().toVar();return e.addAssign(e.dot(e.add(l(31.4159,27.1828,14.142)))),e.z.mul(e.x.add(e.y)).fract().mul(2).sub(1)})),Wa=a((([a])=>{var e=a.oneMinus().clamp(0,1).toVar();return e.mul(e).mul(s(3).sub(e.mul(2)))})),Ga=a((([a])=>{var e=a.x.floor().toVar(),r=e.add(1).toVar(),o=a.y.floor().toVar(),s=o.add(1).toVar(),d=a.z.floor().toVar(),t=d.add(1).toVar(),n=Wa(a.x.fract()).toVar(),u=Wa(a.y.fract()).toVar(),m=Wa(a.z.fract()).toVar(),i=Wa(n.oneMinus()).toVar(),c=Wa(u.oneMinus()).toVar(),v=Wa(m.oneMinus()).toVar(),g=Ca(l(e,o,d)).mul(i).mul(c).mul(v).toVar(),V=Ca(l(e,o,t)).mul(i).mul(c).mul(m).toVar(),b=Ca(l(e,s,d)).mul(i).mul(u).mul(v).toVar(),f=Ca(l(e,s,t)).mul(i).mul(u).mul(m).toVar(),p=Ca(l(r,o,d)).mul(n).mul(c).mul(v).toVar(),w=Ca(l(r,o,t)).mul(n).mul(c).mul(m).toVar(),y=Ca(l(r,s,d)).mul(n).mul(u).mul(v).toVar(),h=Ca(l(r,s,t)).mul(n).mul(u).mul(m).toVar();return g.add(V).add(b).add(f).add(p).add(w).add(y).add(h)})),qa=a((a=>{a=za({...qa.defaults,...a});var e=w.mul(A(a.scale.div(2).add(.5))).add(a.seed).toVar(),r=l().toVar(),o=s(1).toVar();return W(a.complexity.add(4),(()=>{r.addAssign(Ga(e.mul(o))),o.addAssign(o)})),T(a.background,a.color,r.x.add(1).div(5))}));qa.defaults={$name:"Dyson sphere",scale:2,complexity:2,variation:0,color:new Z(12636415),background:new Z(0),seed:0};var La=a((a=>{a=za({...La.defaults,...a});var e=A(a.scale.div(2)).toVar(),r=w.add(a.seed).toVar(),l=s(-1e4).toVar(),d=s(0).toVar();return W(G(s(a.density)),(()=>{d.assign(u(x(c(r,e)).mul(3*Math.PI))),l.assign(o(l,d)),e.mulAssign(1.2)})),l.assign(q(V(I(l),5)).mul(6)),T(a.color,a.background,l)}));La.defaults={$name:"Entangled",scale:2,density:10,color:new Z(8256),background:new Z(16777215),seed:0};var Ra=a((a=>{a=za({...Ra.defaults,...a});var e=w.mul(A(a.scale)).add(a.seed).toVar(),r=x(l(x(e),x(e).mul(2),x(e).mul(3))).toVar();return aa(r,1,u(c(r,Math.PI,4)).mul(.5).add(.5)).add(a.color)}));Ra.defaults={$name:"Fordite",scale:2,color:new Z(0,0,0),seed:0};var Fa=a((a=>{var e=(a=za({...Fa.defaults,...a})).scale.div(2).add(1).toVar(),r=w.mul(A(e)).add(a.seed).toVar(),o=a.turbulence.mul(x(l(0,r.y.mul(.5),0).add(1)).add(x(l(0,r.y.mul(1),0).add(1)).mul(.5),x(l(1,r.y.mul(2),1).add(1)).mul(.25))).mul(5).abs().toVar(),s=x(r.div(4)).add(1).div(2).pow(10).mul(10).smoothstep(0,1);r.addAssign(l(x(r),x(r.yxz),x(r.yzx)).mul(o.mul(s.mul(2).exp())));var d=a.blur.pow(.2).oneMinus().mul(o.add(1)).toVar(),t=x(r.mul(l(0,e,0)));t=(t=t.add(x(r.mul(l(1,15,1))).mul(d))).add(-.5).smoothstep(-1,1).oneMinus();var n=x(l(0,r.y.mul(.75),0)).add(1),u=ea(T(a.colorB,a.colorA,n)),m=aa(u.x.add(x(r.mul(l(0,e,0))).div(4)),u.y,u.z).toVar();return m.assign(T(m,a.colorC,o.mul(.3))),m.mul(t)}));Fa.defaults={$name:"Gas giant",scale:2,turbulence:.3,blur:.6,colorA:new Z(16775408),colorB:new Z(15788208),colorC:new Z(11509968),seed:0};var Na=a((a=>{a=za({...Na.defaults,...a});var o=L(w.normalize()).toVar(),l=c(o.x,2*Math.PI),s=c(o.y,Math.PI).toVar(),t=R($(c(o.x,a.countU)),a.countU),n=R($(c(o.y,a.countV)),a.countV),m=c(t,2*Math.PI),i=c(n,Math.PI),v=I(r(l,m)).mul(u(s)),g=I(r(s,i)),b=e(v,g),f=c(e(R(2*Math.PI,a.countU),R(Math.PI,a.countV)),F(V(a.thinness,.5),0,1,.9,.04),.5),y=q(p(r(f,.002),d(f,.002),b));return T(a.background,a.color,y)}));Na.defaults={$name:"Grid",countU:32,countV:16,thinness:.8,color:new Z(0),background:new Z(16777215)};var Da=a((a=>{a=za({...Da.defaults,...a});var e=w.mul(A(a.scale)).add(a.seed).toVar(),o=x(e).mul(a.density);return o=q(u(o)).div(2),o=p(r(a.thinness,a.blur),d(a.thinness,a.blur),o),T(a.color,a.background,o)}));Da.defaults={$name:"Isolines",scale:2,density:40,blur:.3,thinness:.6,color:new Z(16777215),background:new Z(0),seed:0};var Ya=a((a=>{a=za({...Ya.defaults,...a});var e=w.mul(A(a.scale)).add(a.seed.sin().mul(5)).toVar(),r=e.add(x(e.mul(2))).toVar(),o=x(r).div(x(r.mul(1.01))).clamp(0,2).toVar();return o.addAssign(x(e.mul(100)).div(3)),o.addAssign(x(e.mul(2)).div(2)),T(a.background,a.color,o).mul(o.pow(.1))}));Ya.defaults={$name:"Karst rock",scale:2,color:new Z(16774384),background:new Z(13684944),seed:0};var Ua=a((a=>{a=za({...Ua.defaults,...a});var e=w.mul(A(a.scale)).add(a.seed).toVar(),r=d(x(e),x(e.mul(2)).mul(.5),x(e.mul(6)).mul(.1)),o=(r=q(r.abs().pow(2.5)).toVar(),q(V(.5,a.thinness.add(7))).toVar()),l=q(V(.5,a.thinness.add(7).mul(.5))).toVar();return t(r.greaterThan(o),(()=>{r.assign(1)})).ElseIf(r.lessThan(l),(()=>{r.assign(0)})).Else((()=>{var a=r.sub(l),s=o.sub(l);r.assign(V(R(a,s),5).mul(.75)),r.assign(r.mul(d(.5,x(e.mul(2)).mul(1.5))))})),r.assign(r.add(c(a.noise,x(e.mul(150)).abs().pow3()))),T(a.background,a.color,r)}));Ua.defaults={$name:"Marble",scale:1.2,thinness:5,noise:.3,color:new Z(4539859),background:new Z(15792383),seed:0};var Oa=a((a=>{a=za({...Oa.defaults,...a});var e=w,r=A(a.scale.remap(0,4,2,-2)).toVar(),o=A(a.thinness.remap(0,1,1.5,0)).toVar(),s=a.background.toVar(),d=l(0).toVar(),t=x(e.xyz).toVar(),u=x(e.yzx).toVar(),m=x(e.zxy).toVar(),i=x(l(t,u,m).mul(r).add(a.seed)).toVar();i.assign(q(N(I(i))).pow(3)),d.assign(a.colorA);var c=ea(d);d.assign(aa(c.x,c.y,c.z.mul(i))),s.addAssign(n(a.mode.equal(0),d,d.negate()).mul(o)),i.assign(x(l(u,m,t).mul(r).sub(a.seed))),i.assign(q(N(I(i))).pow(3)),d.assign(a.colorB);c=ea(d);d.assign(aa(c.x,c.y,c.z.mul(i))),s.addAssign(n(a.mode.equal(0),d,d.negate()).mul(o)),i.assign(x(l(m,t,u.negate()).mul(r).add(a.seed))),i.assign(q(N(I(i))).pow(3)),d.assign(a.colorC);c=ea(d);return d.assign(aa(c.x,c.y,c.z.mul(i))),s.addAssign(n(a.mode.equal(0),d,d.negate()).mul(o)),s}));Oa.defaults={$name:"Neon Lights",scale:1.5,thinness:.8,mode:0,colorA:new Z(16711680),colorB:new Z(65280),colorC:new Z(255),background:new Z(0),seed:0};var ja=a((a=>{a=za({...ja.defaults,...a});var e=A(a.scale.add(1)).toVar(),r=w.toVar(),o=l(r).toVar();W(6,(()=>{o.assign(la(o,r.mul(e))),e.mulAssign(a.seed.mul(e).sin().mul(.05).add(1.1))}));var s=x(o).add(1).div(2);return T(a.background,a.color,s)}));ja.defaults={$name:"Photosphere",scale:2,color:new Z(16776960),background:new Z(16711680),seed:0};var Ha=a((a=>{a=za({...Ha.defaults,...a});var e=s(0).toVar(),r=s(0).toVar(),o=A(a.scale.sub(2)).toVar(),d=s(2).toVar();W(a.iterations.add(10),(()=>{e.addAssign(c(d,x(w.mul(o).add(a.seed)))),r.addAssign(d),o.mulAssign(1.5),d.mulAssign(.8)})),e.assign(c(e,e,.5).div(r));var n=a.levelSea.pow(2).toVar(),u=a.levelMountain.pow(2).toVar(),m=T(n,u,a.balanceSand).toVar(),i=T(n,m,.4).toVar(),v=T(n,m,.6).toVar(),V=l().toVar();return t(e.lessThan(n),(()=>{V.assign(T(a.colorDeep,a.colorShallow,g(e,0,n,0,1).pow(A(a.balanceWater.mul(-8).add(4)))))})).ElseIf(e.lessThan(i),(()=>{V.assign(T(a.colorShallow,a.colorBeach,g(e,n,i)))})).ElseIf(e.lessThan(v),(()=>{V.assign(a.colorBeach)})).ElseIf(e.lessThan(m),(()=>{V.assign(T(a.colorBeach,a.colorGrass,g(e,v,m)))})).ElseIf(e.lessThan(u),(()=>{V.assign(T(a.colorGrass,a.colorForest,g(e,m,u).pow(.75)))})).Else((()=>{var r=T(1,u,a.balanceSnow);V.assign(T(a.colorForest,a.colorSnow,p(T(r,u,a.balanceSnow.pow(.5)),r,e)))})),V}));Ha.defaults={$name:"Planet",scale:2,iterations:5,levelSea:.3,levelMountain:.7,balanceWater:.3,balanceSand:.2,balanceSnow:.8,colorDeep:new Z(1194585).convertLinearToSRGB(),colorShallow:new Z(8900331).convertLinearToSRGB(),colorBeach:new Z(16775885).convertLinearToSRGB(),colorGrass:new Z(3978097).convertLinearToSRGB(),colorForest:new Z(12288).convertLinearToSRGB(),colorSnow:new Z(15794175).convertLinearToSRGB(),seed:0};var _a=(1+5**.5)/2,Ka=a((a=>{a=za({...Ka.defaults,...a});var r=V(10,a.count).toVar(),l=w.normalize().toVar(),t=q(l.y).mul(r).sub(1).div(2),n=o(10,r.pow(.5)),u=t.sub(n).floor().clamp(0,r),m=t.add(n).floor().clamp(0,r),i=s(1).toVar();W(m.sub(u),(({i:a})=>{var o=d(a,u),t=D(c(2*Math.PI/_a,o),2*Math.PI),n=S(q(s(o).mul(2).add(1).div(r))),m=oa(n,t);i.assign(e(i,Y(l,m)))}));var v=A(a.size.mul(5).sub(5)).toVar(),g=a.blur.pow(4).toVar(),b=p(v.sub(g),v.add(g),i);return T(a.color,a.background,b)}));Ka.defaults={$name:"Polka dots",count:2,size:.5,blur:.25,color:new Z(0),background:new Z(16777215)};var Za=a((a=>{a=za({...Za.defaults,...a});var e=U(a.angle).toVar(),o=l(r(w.x.mul(m(e)),w.y.mul(u(e))),d(w.x.mul(u(e)),w.y.mul(m(e))),w.z).toVar(),s=a.scale.div(2).add(1).toVar(),t=o.mul(A(s)).add(a.seed).toVar(),n=a.length.add(5).reciprocal().toVar(),i=x(t.mul(s,l(1,n,n)));return i=(i=i.mul(x(t.mul(l(25,1,1))).add(-1).mul(.2))).add(a.strength.sub(.5)).smoothstep(-.3,.3).oneMinus(),T(a.color,a.background,i)}));Za.defaults={$name:"Processed wood",$width:260,scale:2,length:4,strength:.3,angle:0,color:new Z(7348256),background:new Z(15782048),seed:0};var Ja=a((([a,e])=>x(a).mul(e).clamp(-3.14,3.14).cos().add(1).div(2))),Qa=a((a=>{a=za({...Qa.defaults,...a});var e=w.mul(A(a.scale.sub(1))).add(a.seed).toVar(),r=l(O,O.length()).toVar(),o=s(0).toVar(),d=s(0).toVar(),t=s(0).toVar(),n=s(0).toVar(),u=a.fat.add(.2).oneMinus().mul(60).add(30).toVar(),m=s(2).toVar(),i=a.amount.div(2).add(.5).exp().toVar();return W(10,(()=>{o.assign(Ja(e.xyz.add(r),u)),d.assign(Ja(e.yzx.add(r),u)),t.addAssign(o.mul(d).mul(m)),n.addAssign(o.max(d).mul(m)),e.assign(T(e.mul(i),0,.4)),m.mulAssign(.9)})),T(a.background,T(a.color,a.subcolor,n.mul(.1)),t)}));Qa.defaults={$name:"Protozoa",scale:1.5,fat:.7,amount:.4,color:new Z(10526880),subcolor:new Z(14739711),background:new Z(15792383),seed:0};var Xa=a((([a,e])=>{var r=Va(a,e.selectorAngles,e.selectorCenter,e.selectorWidth),o=ca(e.angles.mul(r)),l=ga(e.center),s=ga(e.center.negate());return l.mul(o).mul(s).mul(i(a,1)).xyz})),ae=a((a=>(a=za({...ae.defaults,...a}),Xa(w,a))));ae.normal=a((a=>{a=za({...ae.defaults,...a});var e=w,o=B.normalize().toVar(),l=C.normalize().mul(.01).toVar(),s=v(o,l).normalize().mul(.01).toVar(),d=Xa(e,a),t=Xa(e.add(l),a),n=Xa(e.add(s),a),u=r(t,d),m=r(n,d);return z(v(u,m).normalize())})),ae.defaults={$name:"Rotator",$positionNode:!0,$selectorPlanar:!0,angles:new J(.4,-.6,0),center:new J(0,0,0),selectorCenter:new J(0,0,0),selectorAngles:new Q(0,0),selectorWidth:2};var ee=a((([a,e,r,o])=>{var l=j(a.add(x(a).mul(o))).add(.8).pow(5).toVar();return l.addAssign(l.pow(.5)),a.add(e.mul(l).mul(r))})),re=a((a=>{var e=(a=za({...re.defaults,...a})).bump.div(50).toVar(),o=w.mul(A(a.scale.div(2))).add(a.seed.sin().mul(10)).toVar(),l=B.normalize().toVar(),s=C.normalize().mul(.001).toVar(),d=v(l,s).normalize().mul(.001).toVar(),t=ee(o,l,e,a.curvature),n=ee(o.add(s),l,e,a.curvature),u=ee(o.add(d),l,e,a.curvature),m=r(n,t),i=r(u,t);return z(v(m,i).normalize())}));re.defaults={$name:"Rough clay",$normalNode:!0,scale:2,bump:.5,curvature:.2,seed:0};var oe=a((a=>{a=za({...oe.defaults,...a});var e=w.mul(A(a.scale.div(1))).add(a.seed.sin().mul(10)).toVar(),r=a.sizeYolk.oneMinus(),o=a.sizeWhite.oneMinus(),l=j(e).toVar(),s=l.add(o).pow(8).oneMinus().clamp(-.5,1),d=l.add(r).pow(18).oneMinus().clamp(0,1).pow(.4).clamp(0,1);return T(a.colorBackground,T(a.colorWhite,a.colorYolk,d),s)})),le=a((([a,e,r,o,l])=>{var s=j(a).toVar(),d=s.add(l).pow(8).oneMinus(),t=s.add(o).pow(18).oneMinus().clamp(0,1),n=T(0,T(0,1,t),d);return a.add(e.mul(n).mul(r))}));oe.normal=a((a=>{a=za({...oe.defaults,...a});var e=.05,o=w.mul(A(a.scale.div(1))).add(a.seed.sin().mul(10)).toVar(),l=B.normalize().toVar(),s=C.normalize().mul(.001).toVar(),d=v(l,s).normalize().mul(.001).toVar(),t=a.sizeYolk.oneMinus(),n=a.sizeWhite.oneMinus(),u=le(o,l,e,t,n),m=le(o.add(s),l,e,t,n),i=le(o.add(d),l,e,t,n),c=r(m,u),g=r(i,u);return z(v(c,g).normalize())})),oe.roughness=a((a=>{a=za({...oe.defaults,...a});var e=w.mul(A(a.scale.div(1))).add(a.seed.sin().mul(10)).toVar(),r=a.sizeYolk.oneMinus();return j(e).toVar().add(r).pow(18).clamp(0,1)})),oe.defaults={$name:"Runny eggs",scale:1,sizeYolk:.2,sizeWhite:.7,colorYolk:new Z("orange"),colorWhite:new Z("white"),colorBackground:new Z("lightgray"),seed:0};var se=a((a=>{var e=w.mul(A(a.scale.div(4).add(-1))).add(a.seed).toVar(),r=a.amount.mul(x(e.mul(a.amount.div(2).add(4))).add(4)).toVar(),o=x(e).toVar();return W(a.iterations,(()=>{e.mulAssign(2),o.addAssign(x(e))})),o.subAssign(x(e.mul(2)).abs()),o.assign(o.sub(r).clamp(0,15)),o})),de=a((a=>{a=za({...de.defaults,...a});var e=se(a).mul(1.25).pow(.5),r=w.mul(A(a.scale.add(a.noiseScale.mul(3),2)));return e.addAssign(a.noise.mul(x(r).abs().add(.1).pow(2))),T(a.color,a.background,e)}));de.opacity=a((a=>(a=za({...de.defaults,...a}),se(a).mul(a.opacity.add(.2)).oneMinus()))),de.defaults={$name:"rust",scale:2,iterations:8,amount:-.3,opacity:.5,noise:.5,noiseScale:.5,color:new Z(12615680),background:new Z(32),seed:0};var te=a((a=>{a=za({...te.defaults,...a});var e=w.toVar(),r=A(a.scale.div(3)).toVar(),o=x(l(x(l(e.x.mul(2),e.y,e.z).mul(r)),x(l(e.x,e.y.mul(2),e.z).mul(r)),x(l(e.x,e.y,e.z.mul(2)).mul(r))).mul(r).add(a.seed));return o=V(I(o),3).mul(20),T(a.background,a.color,o)}));te.defaults={$name:"Satin",scale:2,color:new Z(7373055),background:new Z(80),seed:0};var ne=a((([a,e])=>{var r=Va(a,e.selectorAngles,e.selectorCenter,e.selectorWidth),o=va(T(l(1,1,1),e.scales,r)),s=ga(e.center),d=ga(e.center.negate());return s.mul(o).mul(d).mul(i(a,1)).xyz})),ue=a((a=>(a=za({...ue.defaults,...a}),ne(w,a))));ue.normal=a((a=>{a=za({...ue.defaults,...a});var e=w,o=B.normalize().toVar(),l=C.normalize().mul(.01).toVar(),s=v(o,l).normalize().mul(.01).toVar(),d=ne(e,a),t=ne(e.add(l),a),n=ne(e.add(s),a),u=r(t,d),m=r(n,d);return z(v(u,m).normalize())})),ue.defaults={$name:"Scaler",$positionNode:!0,$selectorPlanar:!0,scales:new J(.01,.9,1.7),center:new J(0,0,0),selectorCenter:new J(0,0,0),selectorAngles:new Q(0,0),selectorWidth:2};var me=a((a=>{a=za({...me.defaults,...a});var e=w,r=e.x.mul(ta(a.xFactor,0,100,1.35,30)).toVar(),s=e.y.mul(ta(a.yFactor,0,100,1.35,30)).toVar(),t=e.z.mul(ta(a.zFactor,0,100,1.35,30)).toVar(),n=m(r).toVar(),u=m(s).toVar(),i=m(t).toVar(),v=x(l(e.x.div(n),e.y.div(u),e.z.div(i)));v=H(v).mul(I(v).pow(.75));var g=I(c(r,_(r)).add(1).div(m(r))),V=I(c(s,_(s)).add(1).div(m(s))),b=I(c(t,_(t)).add(1).div(m(t))),f=l().toVar(),p=I(G(r.mul(2/Math.PI).add(1).div(2))),y=I(G(s.mul(2/Math.PI).add(1).div(2))),h=I(G(t.mul(2/Math.PI).add(1).div(2))),z=D(d(p,y,h),2);f.assign(ea(T(a.colorA,a.colorB,z)));var k=aa(f.x,f.y,f.z.mul(v)).toVar();f.assign(ea(a.colorRim));var A=aa(f.x,f.y,c(2,v,f.z)).toVar();return T(k,A,F(o(g,o(V,b)),45,65))}));me.defaults={$name:"Scepter head",xFactor:10,yFactor:22,zFactor:10,colorRim:new Z(16777215),colorA:new Z(7397631),colorB:new Z(3145983)};var ie=a((a=>{a=za({...ie.defaults,...a});var e=w.mul(A(a.scale)).add(a.seed).toVar(),r=x(d(u(e.xyz),m(e.yzx)));e.assign(w.mul(A(a.scale).mul(r)).add(a.seed));r=x(d(u(e.xyz),m(e.yzx)).mul(2));var o=T(a.background,a.color,r).toVar(),l=ea(o).toVar();return aa(d(l.x,a.variety.mul(u(r.mul(Math.PI))).mul(.5)),l.y,l.z)}));ie.defaults={$name:"Scream",scale:2,variety:1,color:new Z(15790176),background:new Z(13668496),seed:0};var ce=a((a=>{a=za({...ce.defaults,...a});var e=w.mul(A(a.scale)).add(a.seed),r=E(0,1,x(e).mul(.5,A(a.contrast)).add(.5,a.balance));return T(a.background,a.color,r)}));ce.defaults={$name:"Simplex noise",scale:2,balance:0,contrast:0,color:new Z(16777215),background:new Z(0),seed:0};var ve=a((a=>{a=za({...ve.defaults,...a});var e=w.mul(A(a.scale.div(2).add(3))).add(a.seed).toVar(),r=I(x(e)).pow(10).mul(10);r=r.mul(A(a.density.sub(2)));var o=n(r.greaterThan(.1),a.variation.mul(x(e)),0),l=ea(T(a.background,a.color,r));return aa(d(l.x,o),l.y,l.z)}));ve.defaults={$name:"Stars",scale:2,density:2,variation:0,color:new Z(16774640),background:new Z(96),seed:0};var ge=a((([a,e])=>{var r=s(2).pow(e.exponent),o=a.div(a.length()).toVar(),l=o.x.abs().pow(r).add(o.y.abs().pow(r)).add(o.z.abs().pow(r)).pow(s(1).div(r));return o.div(l)})),Ve=a((a=>(a=za({...Ve.defaults,...a}),ge(w,a))));Ve.normal=a((a=>{a=za({...Ve.defaults,...a});var e=w,o=B.normalize().toVar(),l=C.normalize().mul(.01).toVar(),s=v(o,l).normalize().mul(.01).toVar(),d=ge(e,a),t=ge(e.add(l),a),n=ge(e.add(s),a),u=r(t,d),m=r(n,d);return z(v(u,m).normalize())})),Ve.defaults={$name:"Supersphere",$positionNode:!0,exponent:3};var be=a((a=>{var e=(a=za({...be.defaults,...a})).scale.div(2).add(1).toVar(),r=w.mul(A(e)).add(a.seed).toVar(),o=a.length.add(5).reciprocal().toVar(),s=a.hairs.mul(.3).toVar(),d=x(r.mul(e,l(1,o,o)));d=(d=d.add(x(r.mul(l(25,1,1))).add(1).mul(s))).add(a.strength.sub(.5)).smoothstep(a.blur.negate(),a.blur).oneMinus();var t=w.y.add(s.sub(.5)).smoothstep(-1,.5);return T(a.bottomColor,a.color,t).mul(d)}));be.defaults={$name:"Tiger fur",scale:2,length:4,blur:.3,strength:.3,hairs:.5,color:new Z(16755200),bottomColor:new Z(16777198),seed:0};var fe=a((([a,e])=>{var r=Va(a,e.selectorAngles,e.selectorCenter,e.selectorWidth);return ga(e.distance.mul(r)).mul(i(a,1)).xyz})),pe=a((a=>(a=za({...pe.defaults,...a}),fe(w,a))));pe.normal=a((a=>{a=za({...pe.defaults,...a});var e=w,o=B.normalize().toVar(),l=C.normalize().mul(.01).toVar(),s=v(o,l).normalize().mul(.01).toVar(),d=fe(e,a),t=fe(e.add(l),a),n=fe(e.add(s),a),u=r(t,d),m=r(n,d);return z(v(u,m).normalize())})),pe.defaults={$name:"Translator",$positionNode:!0,$selectorPlanar:!0,distance:new J(-.5,0,.2),selectorCenter:new J(0,0,0),selectorAngles:new Q(0,0),selectorWidth:.7};var we=a((([a])=>a.add(x(a.mul(Math.PI))))),ye=a((a=>{a=za({...ye.defaults,...a});var e=w.mul(A(a.scale.div(2).add(.5))).add(a.seed).toVar(),r=e.round().toVar(),o=r.toVar(),d=s(1).toVar(),n=l().toVar(),u=s().toVar(),m=s(0).toVar();W(27,(()=>{var a=m.mod(3).sub(1),s=m.div(3).floor().mod(3).sub(1),i=m.div(9).floor().sub(1);n.assign(r.add(l(a,s,i))),u.assign(e.distance(we(n)).add(x(e).div(5))),t(u.lessThan(d),(()=>{d.assign(u),o.assign(n)})),m.addAssign(1)}));var i=x(o.mul(Math.PI)).toVar(),c=T(d,i.add(1).div(2),a.flat),v=T(a.color,a.background,c).toVar(),g=l(i.mul(16.8),i.mul(31.4159),i.mul(27.1828)).sin().add(1).div(2);return T(v,T(v,g,a.variation),a.variation)}));ye.defaults={$name:"Voronoi cells",scale:2,variation:0,flat:0,color:new Z(0),background:new Z(12636415),seed:0};var he=a((([a,e,r,o,l])=>{var s=x(a.add(l)).add(o).clamp(0,1);return s=m(s.mul(Math.PI)).add(1).pow(.5).toVar(),a.add(s.mul(e,r))})),ze=a((a=>{a=za({...ze.defaults,...a});var e=w.mul(A(a.scale.div(1).add(1))).toVar(),o=B.normalize().toVar(),s=C.normalize().mul(.001).toVar(),d=v(o,s).normalize().mul(.001).toVar(),t=g(a.density,0,1,1.5,.7).toVar(),n=l(u(a.seed).mul(100),m(a.seed.div(2)).mul(100),u(a.seed.div(3)).mul(100)).toVar(),i=he(e,o,a.bump,t,n),c=he(e.add(s),o,a.bump,t,n),V=he(e.add(d),o,a.bump,t,n),b=r(c,i),f=r(V,i);return z(v(b,f).normalize())}));ze.defaults={$name:"Water Drops",$normalNode:!0,scale:1.4,density:.5,bump:.6,seed:0};var xe=a((a=>{a=za({...xe.defaults,...a});var e=w.mul(A(a.scale.div(4).add(2))).add(a.seed).toVar(),r=L(w.normalize()).toVar(),o=r.x.mul(a.stripes.round(),2*Math.PI).add(x(e.mul(l(1,0,1))).mul(2)).sin().add(.5).div(2).mul(r.y.remap(0,1,-Math.PI,Math.PI).cos().add(1.2).clamp(0,1)).add(a.variation.mul(2,x(e.mul(1.5)).div(2))).add(a.variation.mul(2,x(e.mul(4)).div(6))).toVar();return o.assign(o.mix(o.round(),.75).add(x(e.mul(2)).mul(a.noise,.5)).add(x(e.mul(3)).mul(a.noise,1)).add(x(e.mul(15)).mul(a.noise,.2)).clamp(0,1)),T(a.background,a.color,o).toVar()}));xe.defaults={$name:"Watermelon",scale:2,stripes:12,variation:.5,noise:.25,color:new Z("yellowgreen"),background:new Z("darkgreen"),seed:0};var ke=a((a=>{a=za({...ke.defaults,...a});var e=U(a.angle).toVar(),o=l(r(w.x.mul(m(e)),w.y.mul(u(e))),d(w.x.mul(u(e)),w.y.mul(m(e))),w.z).toVar(),t=o.mul(A(a.scale.sub(3)).mul(l(K(a.length),4,K(a.length)))).add(a.seed).toVar(),n=x(t).add(1).mul(10).mul(a.rings);n=n.add(n.cos()).cos().add(1).div(2);var i=s(0).toVar(),v=s(0).toVar(),g=A(a.scale.sub(2)).mul(l(1,a.fibersDensity,1)).toVar(),V=s(2).toVar();return W(10,(()=>{i.addAssign(c(V,x(o.mul(g).add(a.seed)))),v.addAssign(V),g.mulAssign(1.8),V.mulAssign(.6)})),i.assign(c(i,5).div(v).mul(10).sin().add(1).div(2)),T(a.color,a.background,T(n,i,a.fibers))}));ke.defaults={$name:"Wood",scale:2.5,rings:4.5,length:1,angle:0,fibers:.3,fibersDensity:10,color:new Z(.8,.4,0),background:new Z(.4,.1,0),seed:0};var Ae=a((a=>{a=za({...Ae.defaults,...a});var e=w.normalize().toVar(),r=oa(a.phi,a.theta).toVar(),o=S(E(r.dot(e),-1,1)),l=A(a.scale.add(1)).toVar(),s=u(o.mul(l)).sub(a.thinness.sub(.5).mul(2));return s=E(s.mul(1e3).div(l),-1,1).mul(.5).add(.5),T(a.background,a.color,s)}));Ae.defaults={$name:"Zebra lines",scale:2,thinness:.5,phi:0,theta:0,color:new Z(0),background:new Z(16777215)};export{la as applyEuler,ka as camouflage,Aa as caveArt,$a as circles,Ia as clouds,Ta as concrete,Ea as cork,Ba as dalmatianSpots,ra as dynamic,qa as dysonSphere,La as entangled,Ra as fordite,Fa as gasGiant,Na as grid,ha as hideFallbackWarning,aa as hsl,Da as isolines,Ya as karstRock,Ua as marble,ua as matRotX,ma as matRotY,ca as matRotYXZ,ia as matRotZ,va as matScale,ga as matTrans,Oa as neonLights,xa as noised,fa as normalVector,ba as overlayPlanar,ja as photosphere,Ha as planet,Ka as polkaDots,za as prepare,Za as processedWood,Qa as protozoa,ta as remapExp,ae as rotator,re as roughClay,oe as runnyEggs,de as rust,te as satin,ue as scaler,me as scepterHead,ie as scream,Va as selectPlanar,ya as showFallbackWarning,ce as simplexNoise,oa as spherical,ve as stars,Ve as supersphere,be as tigerFur,ea as toHsl,pe as translator,na as vnoise,ye as voronoiCells,ze as waterDrops,xe as watermelon,ke as wood,Ae as zebraLines};
