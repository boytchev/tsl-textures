/*! TSL Textures v2.5.1 */
import{Fn as a,min as e,sub as o,max as r,vec3 as n,float as l,add as t,If as s,select as d,sin as u,cos as m,vec4 as i,mul as c,cross as v,remap as p,pow as g,log2 as V,mat4 as y,smoothstep as b,positionGeometry as w,dFdx as h,dFdy as z,transformNormalToView as f,mx_noise_float as x,uniform as k,exp as M,mx_fractal_noise_float as $,mix as A,time as S,round as I,pow2 as P,abs as T,or as B,acos as E,clamp as j,normalLocal as L,tangentLocal as C,Loop as W,floor as R,oneMinus as q,screenSize as G,screenUV as F,equirectUV as D,div as N,remapClamp as Y,sqrt as U,mat2 as O,mod as H,distance as Z,radians as J,matcapUV as X,mx_worley_noise_float as _,sign as K,tan as Q,screenCoordinate as aa,reciprocal as ea,vec2 as oa,mx_worley_noise_vec2 as ra,mx_fractal_noise_vec3 as na,mx_worley_noise_vec3 as la}from"three/tsl";export{mx_noise_float as noise}from"three/tsl";import{Color as ta,Vector3 as sa,Vector2 as da}from"three";const ua=a((([a,n,l,t])=>{var s=t.add(a.mul(12)).mod(12),d=n.mul(e(l,o(1,l)));return l.sub(d.mul(r(-1,e(e(s.sub(3),o(9,s)),1))))}));ua.setLayout({name:"hslHelper",type:"float",inputs:[{name:"h",type:"float"},{name:"s",type:"float"},{name:"l",type:"float"},{name:"n",type:"float"}]});const ma=a((([a,e,o])=>{a=a.fract().add(1).fract(),e=e.clamp(0,1),o=o.clamp(0,1);var r=ua(a,e,o,0),l=ua(a,e,o,8),t=ua(a,e,o,4);return n(r,l,t)}));ma.setLayout({name:"hsl",type:"vec3",inputs:[{name:"h",type:"float"},{name:"s",type:"float"},{name:"l",type:"float"}]});const ia=a((([a])=>{var u=l(a.x).toVar(),m=l(a.y).toVar(),i=l(a.z).toVar(),c=r(u,r(m,i)).toVar(),v=e(u,e(m,i)).toVar(),p=l(0).toVar(),g=l(0).toVar(),V=t(c,v).div(2);return s(v.notEqual(c),(()=>{const a=o(c,v).toVar();g.assign(d(V.lessThanEqual(.5),a.div(t(v,c)),a.div(o(2,t(v,c))))),s(c.equal(u),(()=>{p.assign(o(m,i).div(a).add(d(m.lessThanEqual(i),6,0)))})).ElseIf(c.equal(m),(()=>{p.assign(o(i,u).div(a).add(2))})).Else((()=>{p.assign(o(u,m).div(a).add(4))})),p.divAssign(6)})),n(p,g,V)}));function ca(a){var e={};for(var[o,r]of Object.entries(a))"$"!=o[0]&&(e[o]=r instanceof sa?k(r,"vec3"):k(r));return e}ia.setLayout({name:"toHsl",type:"vec3",inputs:[{name:"rgb",type:"vec3"}]});const va=a((([a,e])=>n(u(e).mul(u(a)),m(a),m(e).mul(u(a)))));va.setLayout({name:"spherical",type:"vec3",inputs:[{name:"phi",type:"float"},{name:"theta",type:"float"}]});const pa=a((([a,e])=>{var o=ga(e);return Va(a,o)}));pa.setLayout({name:"applyEuler",type:"vec4",inputs:[{name:"vec",type:"vec3"},{name:"eu",type:"vec3"}]});const ga=a((([a])=>{var e=m(a.x.div(2)),r=m(a.y.div(2)),n=m(a.z.div(2)),l=u(a.x.div(2)),s=u(a.y.div(2)),d=u(a.z.div(2));return i(t(c(l,r,n),c(e,s,d)),o(c(e,s,n),c(l,r,d)),t(c(e,r,d),c(l,s,n)),o(c(e,r,n),c(l,s,d)))}));ga.setLayout({name:"quaternionFromEuler",type:"vec4",inputs:[{name:"eu",type:"vec3"}]});const Va=a((([a,e])=>{var o=v(e.xyz,a).mul(2).toVar();return t(a,o.mul(e.w),v(e.xyz,o))}));Va.setLayout({name:"applyQuaternion",type:"vec3",inputs:[{name:"vec",type:"vec3"},{name:"quat",type:"vec4"}]});const ya=a((([a,e,o,r,n])=>(a=p(a,e,o,0,1),a=g(2,c(a,V(n.div(r))).add(V(r))))));ya.setLayout({name:"remapExp",type:"float",inputs:[{name:"x",type:"float"},{name:"fromMin",type:"float"},{name:"fromMax",type:"float"},{name:"toMin",type:"float"},{name:"toMax",type:"float"}]});const ba=a((([a])=>a.dot(n(12.9898,78.233,-97.5123)).sin().mul(43758.5453).fract().mul(2).sub(1)));ba.setLayout({name:"vnoise",type:"float",inputs:[{name:"v",type:"vec3"}]});const wa=a((([a])=>{var e=a.cos().toVar(),o=a.sin().toVar();return y(1,0,0,0,0,e,o,0,0,o.negate(),e,0,0,0,0,1)}));wa.setLayout({name:"matRotX",type:"mat4",inputs:[{name:"angle",type:"float"}]});const ha=a((([a])=>{var e=a.cos().toVar(),o=a.sin().toVar();return y(e,0,o.negate(),0,0,1,0,0,o,0,e,0,0,0,0,1)}));ha.setLayout({name:"matRotY",type:"mat4",inputs:[{name:"angle",type:"float"}]});const za=a((([a])=>{var e=a.cos().toVar(),o=a.sin().toVar();return y(e,o,0,0,o.negate(),e,0,0,0,0,1,0,0,0,0,1)}));za.setLayout({name:"matRotZ",type:"mat4",inputs:[{name:"angle",type:"float"}]});const fa=a((([a])=>{var e=wa(a.x),o=ha(a.y),r=za(a.z);return o.mul(e).mul(r)}));fa.setLayout({name:"matRotYXZ",type:"mat4",inputs:[{name:"angles",type:"vec3"}]});const xa=a((([a])=>y(a.x,0,0,0,0,a.y,0,0,0,0,a.z,0,0,0,0,1)));xa.setLayout({name:"matScale",type:"mat4",inputs:[{name:"scales",type:"vec3"}]});const ka=a((([a])=>y(1,0,0,0,0,1,0,0,0,0,1,0,a.x,a.y,a.z,1)));ka.setLayout({name:"matTrans",type:"mat4",inputs:[{name:"vector",type:"vec3"}]});const Ma=a((([a,e,o,r])=>{var n=va(e.x,e.y).mul(r).toVar(),l=o.sub(n.div(2)).sub(a).dot(n).div(n.dot(n)).negate();return b(0,1,l)}));Ma.setLayout({name:"selectPlanar",type:"float",inputs:[{name:"pos",type:"vec3"},{name:"selAngles",type:"vec2"},{name:"selCenter",type:"vec3"},{name:"selWidth",type:"float"}]});const $a=a((a=>{var e=Ma(w,a.selectorAngles,a.selectorCenter,a.selectorWidth).sub(.5).mul(2).abs().oneMinus().pow(.25).negate().mul(a.selectorShow);return n(0,e,e)})),Aa=a((([a])=>{var e=h(a),o=z(a);return f(v(e,o).normalize())}));Aa.setLayout({name:"normalVector",type:"vec3",inputs:[{name:"pos",type:"vec3"}]});var Sa=null,Ia=10;async function Pa(){if(null!=navigator.gpu&&await navigator.gpu.requestAdapter())return;(Sa=document.createElement("div")).innerHTML='\n\t<div style="font-size:1.25em; font-weight:bold;">PLEASE, WAIT</div>\n\t<div  style="font-size:0.85em; font-weight:100;" >NO WEBGPU &mdash; TRYING WEBGL2</div>\n\t<div id="counter"></div>\n\t',Sa.style.left="calc(50% - 8em)",Sa.style.width="16em",Sa.style.fontFamily="Bahnschrifts, Arial",Sa.style.position="absolute",Sa.style.bottom="20px",Sa.style.padding="12px 6px",Sa.style.border="1px solid white",Sa.style.borderRadius="4px",Sa.style.background="rgba(0,0,0,0.5)",Sa.style.color="white",Sa.style.textAlign="center",Sa.style.opacity="0.8",Sa.style.outline="none",Sa.style.zIndex="999",document.body.appendChild(Sa)}function Ta(){Sa&&(Ia>0?Ia--:(Sa.style.display="none",Sa=null))}function Ba(a,e){var o=[];for(var r of a)if(r&&"object"==typeof r){o=Object.keys(r);break}var t={...e};for(var s of o)void 0!==a[s]&&(t[s]=a[s]);for(var d of Object.keys(t))"number"==typeof t[d]?t[d]=l(t[d]):t[d]instanceof ta?t[d]=n(t[d].r,t[d].g,t[d].b):t[d]instanceof sa&&(t[d]=n(t[d].x,t[d].y,t[d].z));return t}function Ea(a,e=1,o=1,r=0){return x(a.mul(e,o).add(r))}const ja=(e,o,r=null)=>{var n=(...o)=>a(e,r)(...o);return n.defaults=o,n};var La=ja((a=>{a=Ba(a,La.defaults);var e=w.mul(M(a.scale.div(3))).add(a.seed).toVar(),o=M(a.smooth.oneMinus().mul(2)),r=$(e.mul(5),o).add(1).div(2).clamp(0,1).pow(2);return A(a.color,a.background,r)}),{$name:"Brain",scale:2,smooth:.5,wave:.5,speed:2.5,color:new ta(16765136),background:new ta(5242880),seed:0});La.normal=ja((a=>{a=Ba(a,La.defaults);var e=w.mul(M(a.scale.div(3))).add(a.seed).toVar(),o=M(a.smooth.oneMinus().mul(2)),r=.01,l=$(e.mul(5),o),t=$(e.add(n(r,0,0)).mul(5),o).sub(l).div(r),s=$(e.add(n(0,r,0)).mul(5),o).sub(l).div(r),d=x(e.mul(a.wave.mul(5))).add(1).div(2).mul(6.28);return n(t,s,S.mul(a.speed).add(d).sin().add(l,1)).normalize()}));var Ca=ja((a=>{a=Ba(a,Ca.defaults);var e=w.mul(M(a.scale)).add(a.seed).toVar(),o=n(0,0,0).toVar();return s(I(x(e,1,.2)).greaterThanEqual(1),(()=>{o.assign(a.colorA)})).ElseIf(I(x(e.yzx,1,.3)).greaterThanEqual(1),(()=>{o.assign(a.colorB)})).ElseIf(I(x(e.zxy,1,.4)).greaterThanEqual(1),(()=>{o.assign(a.colorC)})).Else((()=>{o.assign(a.colorD)})),o}),{$name:"Camouflage",scale:2,colorA:new ta(12762792),colorB:new ta(10258782),colorC:new ta(9610101),colorD:new ta(7435617),seed:0}),Wa={$name:"Cave art",scale:2,thinness:2,noise:.3,color:new ta(13845829),background:new ta(16775408),seed:0},Ra=ja((a=>{a=Ba(a,Wa);var e=w.mul(M(a.scale)).add(a.seed).toVar(),r=x(e,4).sin().toVar(),n=x(e.mul(1.5),4).cos().toVar(),d=M(o(l(3),a.thinness)),u=o(d,P(T(t(r,n))).mul(20)).toVar();return s(B(r.greaterThan(n),u.lessThan(0)),(()=>{u.assign(0)})),s(u.lessThanEqual(0),(()=>{u.assign(a.noise.mul(P(x(e.mul(30)))))})),A(a.background,a.color,u)}),Wa),qa={$name:"Circles",scale:2,variety:1,color:new ta(15786192),flat:0,seed:0},Ga=ja((a=>{a=Ba(a,qa);for(var e=d(a.flat,w,w.normalize()),o=E(j(e.y,-1,1)).mul(20),r=M(a.scale.sub(1)),n=o.div(3e3).mul(r),t=l(a.seed.sin().mul(100)).toVar(),s=0;s<=10;s++)t.addAssign(u(n.mul(2**s).sub(Math.PI*s/2)).mul(-s*(s+1)/2));t.assign(t.div(200).clamp(-2,2));var m=ia(a.color),i=m.x.add(t.mul(a.variety)).mod(1).mul(10),c=i.floor(),v=i.sub(c);return v=d(v.lessThan(.5),v.pow(1.5),v.pow(1/1.5)),ma(c.add(v).div(10),m.y,m.z)}),qa),Fa={$name:"Clouds",scale:2,density:.5,opacity:1,color:new ta(16777215),subcolor:new ta(10526896),seed:0},Da=a((a=>{const e=w,o=M(a.scale.div(1.5).sub(.5)),r=t(Ea(e,o,1,a.seed),Ea(e,o,2,a.seed).mul(.8),Ea(e,o,6,a.seed).mul(.1),Ea(e,o,8,a.seed).mul(.07,a.opacity),a.density.remap(0,1,-.5,1.5)),n=j(0,1,c(r,2).pow(1.5).sub(1).mul(a.opacity));return i(A(a.subcolor,a.color,r.clamp(0,1)),n)})),Na=ja((a=>(a=Ba(a,Fa),Da(a).rgb)),Fa);Na.opacity=ja((a=>(a=Ba(a,Fa),Da(a).a)),Fa);var Ya={$name:"Concrete",$normalNode:!0,scale:2,density:.5,bump:.5,seed:0},Ua=a((([a,e,o,r,n])=>{var l=x(a.add(n)).mul(.5).add(.5);return l=o.mul(g(T(l),r)),a.add(l.mul(e))})),Oa=ja((a=>{a=Ba(a,Ya);var e=w.mul(M(a.scale.div(2).add(2))).toVar(),r=L.normalize().toVar(),l=C.normalize().mul(.001).toVar(),t=v(r,l).normalize().mul(.001).toVar(),s=p(a.density,0,1,10,.5).toVar(),d=n(u(a.seed).mul(100),m(a.seed.div(2)).mul(100),u(a.seed.div(3)).mul(100)).toVar(),i=Ua(e,r,a.bump,s,d),c=Ua(e.add(l),r,a.bump,s,d),g=Ua(e.add(t),r,a.bump,s,d),V=o(c,i),y=o(g,i);return f(v(V,y).normalize())}),Ya),Ha={$name:"Cork",scale:1,straight:1,noise:.3,color:new ta(16773312),background:new ta(13664352),seed:0},Za=a((([a])=>a.add(ba(a)))),Ja=ja((a=>{a=Ba(a,Ha);var e=w.mul(M(a.scale.div(1.5).add(1))).add(a.seed).toVar(),o=e.round().toVar(),r=o.toVar(),t=l(1).toVar(),d=n().toVar(),u=l().toVar(),m=l(0).toVar();W(27,(()=>{var l=m.mod(3).sub(1),i=m.div(3).floor().mod(3).sub(1),c=m.div(9).floor().sub(1);d.assign(o.add(n(l,i,c))),u.assign(e.distance(Za(d))),u.addAssign(x(e.add(d)).div(a.straight.exp())),s(u.lessThan(t),(()=>{t.assign(u),r.assign(d)})),m.addAssign(1)}));var i=x(r.mul(Math.PI)).toVar(),c=x(e.mul(12)).toVar();c.assign(c.sign().mul(c.abs().pow3())),c.addAssign(x(e.mul(40)).div(3));var v=i.add(1).div(2);return A(a.color,a.background,v.add(c.mul(a.noise))).toVar()}),Ha),Xa={$name:"Dalmatian spots",$width:260,scale:2,density:.6,color:new ta(16777215),background:new ta(0),seed:0},_a=ja((a=>{a=Ba(a,Xa);var e=w.mul(M(a.scale)).add(a.seed).sub(1e3).toVar(),o=l(1).toVar(),r=l(1.5).sub(a.density).mul(2).toVar(),n=a.density.mul(5).add(5).toVar();return W(n,(()=>{o.mulAssign(x(e).abs().pow(r).mul(100).sub(50).clamp(0,1).oneMinus()),e.assign(e.mul(1.01)),o.mulAssign(x(e.yzx).abs().pow(r).mul(100).sub(50).clamp(0,1).oneMinus()),e.assign(e.mul(1.01)),o.mulAssign(x(e.zxy).abs().pow(r).mul(100).sub(50).clamp(0,1).oneMinus()),e.assign(e.mul(1.01))})),A(a.background,a.color,o.clamp(0,1))}),Xa),Ka={$name:"Darth Maul",scale:2,shift:new sa(0,0,0),complexity:0,angle:60,distance:1.9,color:new ta(15745088),background:new ta(0),balance:0,seed:0},Qa=ja((a=>{a=Ba(a,Ka);var e=w.add(a.shift).mul(M(a.scale.div(1.5).sub(1))).sub(a.shift).mul(n(1,.5,.5)).toVar(),o=d(w.y.mul(a.angle.radians().cos()).add(w.z.mul(a.angle.radians().sin())).greaterThan(a.distance),1,0);e.x.assign(e.x.add(a.shift.x).abs()),e.y.addAssign(a.seed),e.z.mulAssign(a.shift.z);var r=x(e).toVar(),l=r.sin().mul(r.mul(a.complexity.mul(2).add(1).exp()).sin()).remap(0,.2,1,-1).greaterThan(a.balance).select(0,1),t=d(e.x.greaterThan(x(e.mul(2.3)).abs().mul(.5).add(.02)),1,0);return A(a.background,a.color,l.mul(o).mul(t).clamp(0,1))}),Ka),ae={$name:"Dyson sphere",scale:2,complexity:2,variation:0,color:new ta(12636415),background:new ta(0),seed:0},ee=a((([a])=>{var e=a.mul(5**.5).fract().toVar();return e.addAssign(e.dot(e.add(n(31.4159,27.1828,14.142)))),e.z.mul(e.x.add(e.y)).fract().mul(2).sub(1)})),oe=a((([a])=>{var e=a.oneMinus().clamp(0,1).toVar();return e.mul(e).mul(l(3).sub(e.mul(2)))})),re=a((([a])=>{var e=a.x.floor().toVar(),o=e.add(1).toVar(),r=a.y.floor().toVar(),l=r.add(1).toVar(),t=a.z.floor().toVar(),s=t.add(1).toVar(),d=oe(a.x.fract()).toVar(),u=oe(a.y.fract()).toVar(),m=oe(a.z.fract()).toVar(),i=oe(d.oneMinus()).toVar(),c=oe(u.oneMinus()).toVar(),v=oe(m.oneMinus()).toVar(),p=ee(n(e,r,t)).mul(i).mul(c).mul(v).toVar(),g=ee(n(e,r,s)).mul(i).mul(c).mul(m).toVar(),V=ee(n(e,l,t)).mul(i).mul(u).mul(v).toVar(),y=ee(n(e,l,s)).mul(i).mul(u).mul(m).toVar(),b=ee(n(o,r,t)).mul(d).mul(c).mul(v).toVar(),w=ee(n(o,r,s)).mul(d).mul(c).mul(m).toVar(),h=ee(n(o,l,t)).mul(d).mul(u).mul(v).toVar(),z=ee(n(o,l,s)).mul(d).mul(u).mul(m).toVar();return p.add(g).add(V).add(y).add(b).add(w).add(h).add(z)})),ne=ja((a=>{a=Ba(a,ae);var e=w.mul(M(a.scale.div(2).add(.5))).add(a.seed).toVar(),o=n().toVar(),r=l(1).toVar();return W(a.complexity.add(4),(()=>{o.addAssign(re(e.mul(r))),r.addAssign(r)})),A(a.background,a.color,o.x.add(1).div(5))}),ae),le={$name:"Entangled",scale:2,density:10,color:new ta(8256),background:new ta(16777215),seed:0},te=ja((a=>{a=Ba(a,le);var e=M(a.scale.div(2)).toVar(),o=w.add(a.seed).toVar(),n=l(-1e4).toVar(),t=l(0).toVar();return W(R(l(a.density)),(()=>{t.assign(u(x(c(o,e)).mul(3*Math.PI))),n.assign(r(n,t)),e.mulAssign(1.2)})),n.assign(q(g(T(n),5)).mul(6)),A(a.color,a.background,n)}),le),se={$name:"Fordite",scale:2,color:new ta(0,0,0),seed:0},de=ja((a=>{a=Ba(a,se);var e=w.mul(M(a.scale)).add(a.seed).toVar(),o=x(n(x(e),x(e).mul(2),x(e).mul(3))).toVar();return ma(o,1,u(c(o,Math.PI,4)).mul(.5).add(.5)).add(a.color)}),se),ue={$name:"Gas giant",scale:2,turbulence:.3,blur:.6,colorA:new ta(16775408),colorB:new ta(15788208),colorC:new ta(11509968),seed:0},me=ja((a=>{var e=(a=Ba(a,ue)).scale.div(2).add(1).toVar(),o=w.mul(M(e)).add(a.seed).toVar(),r=a.turbulence.mul(x(n(0,o.y.mul(.5),0).add(1)).add(x(n(0,o.y.mul(1),0).add(1)).mul(.5),x(n(1,o.y.mul(2),1).add(1)).mul(.25))).mul(5).abs().toVar(),l=x(o.div(4)).add(1).div(2).pow(10).mul(10).smoothstep(0,1);o.addAssign(n(x(o),x(o.yxz),x(o.yzx)).mul(r.mul(l.mul(2).exp())));var t=a.blur.pow(.2).oneMinus().mul(r.add(1)).toVar(),s=x(o.mul(n(0,e,0)));s=(s=s.add(x(o.mul(n(1,15,1))).mul(t))).add(-.5).smoothstep(-1,1).oneMinus();var d=x(n(0,o.y.mul(.75),0)).add(1),u=ia(A(a.colorB,a.colorA,d)),m=ma(u.x.add(x(o.mul(n(0,e,0))).div(4)),u.y,u.z).toVar();return m.assign(A(m,a.colorC,r.mul(.3))),m.mul(s)}),ue),ie={$name:"Grid",countU:32,countV:16,thinness:.8,color:new ta(0),background:new ta(16777215),flat:0},ce=ja((a=>{a=Ba(a,ie);var r=d(a.flat,G.x.div(G.y),2),n=d(a.flat,F,D(w.normalize())).toVar(),l=c(n.x,r,Math.PI),s=c(n.y,Math.PI).toVar(),m=N(I(c(n.x,a.countU)),a.countU),i=N(I(c(n.y,a.countV)),a.countV),v=c(m,r,Math.PI),p=c(i,Math.PI),V=T(o(l,v)).mul(d(a.flat,1,u(s))),y=T(o(s,p)),h=e(V,y),z=c(e(N(r.mul(Math.PI),a.countU),N(Math.PI,a.countV)),Y(g(a.thinness,.5),0,1,.9,.04),.5),f=q(b(o(z,.002),t(z,.002),h));return A(a.background,a.color,f)}),ie),ve={$name:"Isolines",scale:2,density:40,blur:.3,thinness:.6,color:new ta(16777215),background:new ta(0),seed:0},pe=ja((a=>{a=Ba(a,ve);var e=w.mul(M(a.scale)).add(a.seed).toVar(),r=x(e).mul(a.density);return r=q(u(r)).div(2),r=b(o(a.thinness,a.blur),t(a.thinness,a.blur),r),A(a.color,a.background,r)}),ve),ge={$name:"Karst rock",scale:2,color:new ta(16774384),background:new ta(13684944),seed:0},Ve=ja((a=>{a=Ba(a,ge);var e=w.mul(M(a.scale)).add(a.seed.sin().mul(5)).toVar(),o=e.add(x(e.mul(2))).toVar(),r=x(o).div(x(o.mul(1.01))).clamp(0,2).toVar();return r.addAssign(x(e.mul(100)).div(3)),r.addAssign(x(e.mul(2)).div(2)),A(a.background,a.color,r).mul(r.pow(.1))}),ge),ye={$name:"Marble",scale:1.2,thinness:5,noise:.3,color:new ta(4539859),background:new ta(15792383),seed:0},be=ja((a=>{a=Ba(a,ye);var e=w.mul(M(a.scale)).add(a.seed).toVar(),o=t(x(e),x(e.mul(2)).mul(.5),x(e.mul(6)).mul(.1)),r=(o=q(o.abs().pow(2.5)).toVar(),q(g(.5,a.thinness.add(7))).toVar()),n=q(g(.5,a.thinness.add(7).mul(.5))).toVar();return s(o.greaterThan(r),(()=>{o.assign(1)})).ElseIf(o.lessThan(n),(()=>{o.assign(0)})).Else((()=>{var a=o.sub(n),l=r.sub(n);o.assign(g(N(a,l),5).mul(.75)),o.assign(o.mul(t(.5,x(e.mul(2)).mul(1.5))))})),o.assign(o.add(c(a.noise,x(e.mul(150)).abs().pow3()))),A(a.background,a.color,o)}),ye),we={$name:"Neon Lights",scale:1.5,thinness:.8,mode:0,colorA:new ta(16711680),colorB:new ta(65280),colorC:new ta(255),background:new ta(0),seed:0},he=ja((a=>{a=Ba(a,we);var e=w,o=M(a.scale.remap(0,4,2,-2)).toVar(),r=M(a.thinness.remap(0,1,1.5,0)).toVar(),l=a.background.toVar(),t=n(0).toVar(),s=x(e.xyz).toVar(),u=x(e.yzx).toVar(),m=x(e.zxy).toVar(),i=x(n(s,u,m).mul(o).add(a.seed)).toVar();i.assign(q(U(T(i))).pow(3)),t.assign(a.colorA);var c=ia(t);t.assign(ma(c.x,c.y,c.z.mul(i))),l.addAssign(d(a.mode.equal(0),t,t.negate()).mul(r)),i.assign(x(n(u,m,s).mul(o).sub(a.seed))),i.assign(q(U(T(i))).pow(3)),t.assign(a.colorB);c=ia(t);t.assign(ma(c.x,c.y,c.z.mul(i))),l.addAssign(d(a.mode.equal(0),t,t.negate()).mul(r)),i.assign(x(n(m,s,u.negate()).mul(o).add(a.seed))),i.assign(q(U(T(i))).pow(3)),t.assign(a.colorC);c=ia(t);return t.assign(ma(c.x,c.y,c.z.mul(i))),l.addAssign(d(a.mode.equal(0),t,t.negate()).mul(r)),l}),we),ze={$name:"Photosphere",scale:2,color:new ta(16776960),background:new ta(16711680),seed:0},fe=ja((a=>{a=Ba(a,ze);var e=M(a.scale.add(1)).toVar(),o=w.toVar(),r=n(o).toVar();W(6,(()=>{r.assign(pa(r,o.mul(e))),e.mulAssign(a.seed.mul(e).sin().mul(.05).add(1.1))}));var l=x(r).add(1).div(2);return A(a.background,a.color,l)}),ze),xe={$name:"Planet",scale:2,iterations:5,levelSea:.3,levelMountain:.7,balanceWater:.3,balanceSand:.2,balanceSnow:.8,colorDeep:new ta(1194585).convertLinearToSRGB(),colorShallow:new ta(8900331).convertLinearToSRGB(),colorBeach:new ta(16775885).convertLinearToSRGB(),colorGrass:new ta(3978097).convertLinearToSRGB(),colorForest:new ta(12288).convertLinearToSRGB(),colorSnow:new ta(15794175).convertLinearToSRGB(),seed:0},ke=ja((a=>{a=Ba(a,xe);var e=l(0).toVar(),o=l(0).toVar(),r=M(a.scale.sub(2)).toVar(),t=l(2).toVar();W(a.iterations.add(10),(()=>{e.addAssign(c(t,x(w.mul(r).add(a.seed)))),o.addAssign(t),r.mulAssign(1.5),t.mulAssign(.8)})),e.assign(c(e,e,.5).div(o));var d=a.levelSea.pow(2).toVar(),u=a.levelMountain.pow(2).toVar(),m=A(d,u,a.balanceSand).toVar(),i=A(d,m,.4).toVar(),v=A(d,m,.6).toVar(),g=n().toVar();return s(e.lessThan(d),(()=>{g.assign(A(a.colorDeep,a.colorShallow,p(e,0,d,0,1).pow(M(a.balanceWater.mul(-8).add(4)))))})).ElseIf(e.lessThan(i),(()=>{g.assign(A(a.colorShallow,a.colorBeach,p(e,d,i)))})).ElseIf(e.lessThan(v),(()=>{g.assign(a.colorBeach)})).ElseIf(e.lessThan(m),(()=>{g.assign(A(a.colorBeach,a.colorGrass,p(e,v,m)))})).ElseIf(e.lessThan(u),(()=>{g.assign(A(a.colorGrass,a.colorForest,p(e,m,u).pow(.75)))})).Else((()=>{var o=A(1,u,a.balanceSnow);g.assign(A(a.colorForest,a.colorSnow,b(A(o,u,a.balanceSnow.pow(.5)),o,e)))})),g}),xe),Me={$name:"Polka dots",count:2,size:.5,blur:.25,color:new ta(0),background:new ta(16777215),flat:0},$e=(1+5**.5)/2,Ae=ja((a=>{a=Ba(a,Me);var o=l(1).toVar();s(a.flat.equal(1),(()=>{var e=a.count.pow(2).sub(.5).toVar(),r=w.xy.mul(e).mul(O(1,1,-1,1)),n=r.round().toVar();o.assign(r.distance(n).div(e))})).Else((()=>{var n=g(10,a.count).toVar(),s=w.normalize().toVar(),d=q(s.y).mul(n).sub(1).div(2),u=r(10,n.pow(.5)),m=d.sub(u).floor().clamp(0,n),i=d.add(u).floor().clamp(0,n);o.assign(1).toVar(),W(i.sub(m),(({i:a})=>{var r=t(a,m),d=H(c(2*Math.PI/$e,r),2*Math.PI),u=E(q(l(r).mul(2).add(1).div(n))),i=va(u,d);o.assign(e(o,Z(s,i)))}))}));var n=M(a.size.mul(5).sub(5)).toVar(),d=a.blur.pow(4).toVar(),u=b(n.sub(d),n.add(d),o);return A(a.color,a.background,u)}),Me),Se={$name:"Processed wood",$width:260,scale:2,lengths:4,strength:.3,angle:0,color:new ta(7348256),background:new ta(15782048),seed:0},Ie=ja((a=>{a=Ba(a,Se);var e=J(a.angle).toVar(),r=n(o(w.x.mul(m(e)),w.y.mul(u(e))),t(w.x.mul(u(e)),w.y.mul(m(e))),w.z).toVar(),l=a.scale.div(2).add(1).toVar(),s=r.mul(M(l)).add(a.seed).toVar(),d=a.lengths.add(5).reciprocal().toVar(),i=x(s.mul(l,n(1,d,d)));return i=(i=i.mul(x(s.mul(n(25,1,1))).add(-1).mul(.2))).add(a.strength.sub(.5)).smoothstep(-.3,.3).oneMinus(),A(a.color,a.background,i)}),Se),Pe={$name:"Protozoa",scale:1.5,fat:.7,amount:.4,color:new ta(10526880),subcolor:new ta(14739711),background:new ta(15792383),seed:0},Te=a((([a,e])=>x(a).mul(e).clamp(-3.14,3.14).cos().add(1).div(2))),Be=ja((a=>{a=Ba(a,Pe);var e=w.mul(M(a.scale.sub(1))).add(a.seed).toVar(),o=n(X,X.length()).toVar(),r=l(0).toVar(),t=l(0).toVar(),s=l(0).toVar(),d=l(0).toVar(),u=a.fat.add(.2).oneMinus().mul(60).add(30).toVar(),m=l(2).toVar(),i=a.amount.div(2).add(.5).exp().toVar();return W(10,(()=>{r.assign(Te(e.xyz.add(o),u)),t.assign(Te(e.yzx.add(o),u)),s.addAssign(r.mul(t).mul(m)),d.addAssign(r.max(t).mul(m)),e.assign(A(e.mul(i),0,.4)),m.mulAssign(.9)})),A(a.background,A(a.color,a.subcolor,d.mul(.1)),s)}),Pe),Ee={$name:"Rotator",$positionNode:!0,$selectorPlanar:!0,angles:new sa(.4,-.6,0),center:new sa(0,0,0),selectorCenter:new sa(0,0,0),selectorAngles:new da(0,0),selectorWidth:2},je=a((([a,e])=>{var o=Ma(a,e.selectorAngles,e.selectorCenter,e.selectorWidth),r=fa(e.angles.mul(o)),n=ka(e.center),l=ka(e.center.negate());return n.mul(r).mul(l).mul(i(a,1)).xyz})),Le=ja((a=>(a=Ba(a,Ee),je(w,a))),Ee);Le.normal=ja((a=>{a=Ba(a,Ee);var e=w,r=L.normalize().toVar(),n=C.normalize().mul(.01).toVar(),l=v(r,n).normalize().mul(.01).toVar(),t=je(e,a),s=je(e.add(n),a),d=je(e.add(l),a),u=o(s,t),m=o(d,t);return f(v(u,m).normalize())}),Ee);var Ce={$name:"Rough clay",$normalNode:!0,scale:2,bump:.5,curvature:.2,seed:0},We=a((([a,e,o,r])=>{var n=_(a.add(x(a).mul(r))).add(.8).pow(5).toVar();return n.addAssign(n.pow(.5)),a.add(e.mul(n).mul(o))})),Re=ja((a=>{var e=(a=Ba(a,Ce)).bump.div(50).toVar(),r=w.mul(M(a.scale.div(2))).add(a.seed.sin().mul(10)).toVar(),n=L.normalize().toVar(),l=C.normalize().mul(.001).toVar(),t=v(n,l).normalize().mul(.001).toVar(),s=We(r,n,e,a.curvature),d=We(r.add(l),n,e,a.curvature),u=We(r.add(t),n,e,a.curvature),m=o(d,s),i=o(u,s);return f(v(m,i).normalize())}),Ce),qe={$name:"Runny eggs",scale:1,sizeYolk:.2,sizeWhite:.7,colorYolk:new ta("orange"),colorWhite:new ta("white"),colorBackground:new ta("lightgray"),seed:0},Ge=ja((a=>{a=Ba(a,qe);var e=w.mul(M(a.scale.div(1))).add(a.seed.sin().mul(10)).toVar(),o=a.sizeYolk.oneMinus(),r=a.sizeWhite.oneMinus(),n=_(e).toVar(),l=n.add(r).pow(8).oneMinus().clamp(-.5,1),t=n.add(o).pow(18).oneMinus().clamp(0,1).pow(.4).clamp(0,1);return A(a.colorBackground,A(a.colorWhite,a.colorYolk,t),l)}),qe),Fe=a((([a,e,o,r,n])=>{var l=_(a).toVar(),t=l.add(n).pow(8).oneMinus(),s=l.add(r).pow(18).oneMinus().clamp(0,1),d=A(0,A(0,1,s),t);return a.add(e.mul(d).mul(o))}));Ge.normal=ja((a=>{a=Ba(a,qe);var e=.05,r=w.mul(M(a.scale.div(1))).add(a.seed.sin().mul(10)).toVar(),n=L.normalize().toVar(),l=C.normalize().mul(.001).toVar(),t=v(n,l).normalize().mul(.001).toVar(),s=a.sizeYolk.oneMinus(),d=a.sizeWhite.oneMinus(),u=Fe(r,n,e,s,d),m=Fe(r.add(l),n,e,s,d),i=Fe(r.add(t),n,e,s,d),c=o(m,u),p=o(i,u);return f(v(c,p).normalize())}),qe),Ge.roughness=ja((a=>{a=Ba(a,qe);var e=w.mul(M(a.scale.div(1))).add(a.seed.sin().mul(10)).toVar(),o=a.sizeYolk.oneMinus();return _(e).toVar().add(o).pow(18).clamp(0,1)}),qe);var De={$name:"rust",scale:2,iterations:8,amount:-.3,opacity:.5,noise:.5,noiseScale:.5,color:new ta(12615680),background:new ta(32),seed:0},Ne=a((a=>{var e=w.mul(M(a.scale.div(4).add(-1))).add(a.seed).toVar(),o=a.amount.mul(x(e.mul(a.amount.div(2).add(4))).add(4)).toVar(),r=x(e).toVar();return W(a.iterations,(()=>{e.mulAssign(2),r.addAssign(x(e))})),r.subAssign(x(e.mul(2)).abs()),r.assign(r.sub(o).clamp(0,15)),r})),Ye=ja((a=>{a=Ba(a,De);var e=Ne(a).mul(1.25).pow(.5),o=w.mul(M(a.scale.add(a.noiseScale.mul(3),2)));return e.addAssign(a.noise.mul(x(o).abs().add(.1).pow(2))),A(a.color,a.background,e)}),De);Ye.opacity=ja((a=>(a=Ba(a,De),Ne(a).mul(a.opacity.add(.2)).oneMinus())),De);var Ue={$name:"Satin",scale:2,color:new ta(7373055),background:new ta(80),seed:0},Oe=ja((a=>{a=Ba(a,Ue);var e=w.toVar(),o=M(a.scale.div(3)).toVar(),r=x(n(x(n(e.x.mul(2),e.y,e.z).mul(o)),x(n(e.x,e.y.mul(2),e.z).mul(o)),x(n(e.x,e.y,e.z.mul(2)).mul(o))).mul(o).add(a.seed));return r=g(T(r),3).mul(20),A(a.background,a.color,r)}),Ue);Oe.defaults={$name:"Satin",scale:2,color:new ta(7373055),background:new ta(80),seed:0};var He={$name:"Scaler",$positionNode:!0,$selectorPlanar:!0,scales:new sa(.01,.9,1.7),center:new sa(0,0,0),selectorCenter:new sa(0,0,0),selectorAngles:new da(0,0),selectorWidth:2},Ze=a((([a,e])=>{var o=Ma(a,e.selectorAngles,e.selectorCenter,e.selectorWidth),r=xa(A(n(1,1,1),e.scales,o)),l=ka(e.center),t=ka(e.center.negate());return l.mul(r).mul(t).mul(i(a,1)).xyz})),Je=ja((a=>(a=Ba(a,He),Ze(w,a))),He);Je.normal=ja((a=>{a=Ba(a,He);var e=w,r=L.normalize().toVar(),n=C.normalize().mul(.01).toVar(),l=v(r,n).normalize().mul(.01).toVar(),t=Ze(e,a),s=Ze(e.add(n),a),d=Ze(e.add(l),a),u=o(s,t),m=o(d,t);return f(v(u,m).normalize())}),He);var Xe={$name:"Scepter head",xFactor:10,yFactor:22,zFactor:10,colorRim:new ta(16777215),colorA:new ta(7397631),colorB:new ta(3145983)},_e=ja((a=>{a=Ba(a,Xe);var e=w,o=e.x.mul(ya(a.xFactor,0,100,1.35,30)).toVar(),l=e.y.mul(ya(a.yFactor,0,100,1.35,30)).toVar(),s=e.z.mul(ya(a.zFactor,0,100,1.35,30)).toVar(),d=m(o).toVar(),u=m(l).toVar(),i=m(s).toVar(),v=x(n(e.x.div(d),e.y.div(u),e.z.div(i)));v=K(v).mul(T(v).pow(.75));var p=T(c(o,Q(o)).add(1).div(m(o))),g=T(c(l,Q(l)).add(1).div(m(l))),V=T(c(s,Q(s)).add(1).div(m(s))),y=n().toVar(),b=T(R(o.mul(2/Math.PI).add(1).div(2))),h=T(R(l.mul(2/Math.PI).add(1).div(2))),z=T(R(s.mul(2/Math.PI).add(1).div(2))),f=H(t(b,h,z),2);y.assign(ia(A(a.colorA,a.colorB,f)));var k=ma(y.x,y.y,y.z.mul(v)).toVar();y.assign(ia(a.colorRim));var M=ma(y.x,y.y,c(2,v,y.z)).toVar();return A(k,M,Y(r(p,r(g,V)),45,65))}),Xe),Ke={$name:"Scream",scale:2,variety:1,color:new ta(15790176),background:new ta(13668496),seed:0},Qe=ja((a=>{a=Ba(a,Ke);var e=w.mul(M(a.scale)).add(a.seed).toVar(),o=x(t(u(e.xyz),m(e.yzx)));e.assign(w.mul(M(a.scale).mul(o)).add(a.seed));o=x(t(u(e.xyz),m(e.yzx)).mul(2));var r=A(a.background,a.color,o).toVar(),n=ia(r).toVar();return ma(t(n.x,a.variety.mul(u(o.mul(Math.PI))).mul(.5)),n.y,n.z)}),Ke);Qe.defaults={$name:"Scream",scale:2,variety:1,color:new ta(15790176),background:new ta(13668496),seed:0};var ao={$name:"Simplex noise",scale:2,balance:0,contrast:0,color:new ta(16777215),background:new ta(0),seed:0},eo=ja((a=>{a=Ba(a,ao);var e=w.mul(M(a.scale)).add(a.seed),o=j(0,1,x(e).mul(.5,M(a.contrast)).add(.5,a.balance));return A(a.background,a.color,o)}),ao),oo={$name:"Stars",scale:2,density:2,variation:0,color:new ta(16774640),background:new ta(96),seed:0},ro=ja((a=>{a=Ba(a,oo);var e=w.mul(M(a.scale.div(2).add(3))).add(a.seed).toVar(),o=T(x(e)).pow(10).mul(10);o=o.mul(M(a.density.sub(2)));var r=d(o.greaterThan(.1),a.variation.mul(x(e)),0),n=ia(A(a.background,a.color,o));return ma(t(n.x,r),n.y,n.z)}),oo),no={$name:"Static noise",scale:2,balance:0,contrast:0,delay:0,seed:0},lo=ja((a=>{a=Ba(a,no);var e=aa.div(M(a.scale)).add(a.seed),o=a.delay.sub(1).mul(5).exp(),r=S.div(o).round().mul(o),l=ba(r.sin()).mul(1e3),t=j(0,1,x(e.add(l)));return t=t.mul(.5,M(a.contrast)).add(.5,a.balance),n(t)}),no),to={$name:"Supersphere",$positionNode:!0,exponent:3},so=a((([a,e])=>{var o=l(2).pow(e.exponent),r=a.div(a.length()).toVar(),n=r.x.abs().pow(o).add(r.y.abs().pow(o)).add(r.z.abs().pow(o)).pow(l(1).div(o));return r.div(n)})),uo=ja((a=>(a=Ba(a,to),so(w,a))),to);uo.normal=ja((a=>{a=Ba(a,to);var e=w,r=L.normalize().toVar(),n=C.normalize().mul(.01).toVar(),l=v(r,n).normalize().mul(.01).toVar(),t=so(e,a),s=so(e.add(n),a),d=so(e.add(l),a),u=o(s,t),m=o(d,t);return f(v(u,m).normalize())}),to);var mo={$name:"Tiger fur",scale:2,lengths:4,blur:.3,strength:.3,hairs:.5,color:new ta(16755200),bottomColor:new ta(16777198),seed:0},io=ja((a=>{var e=(a=Ba(a,mo)).scale.div(2).add(1).toVar(),o=w.mul(M(e)).add(a.seed).toVar(),r=a.lengths.add(5).reciprocal().toVar(),l=a.hairs.mul(.3).toVar(),t=x(o.mul(e,n(1,r,r)));t=(t=t.add(x(o.mul(n(25,1,1))).add(1).mul(l))).add(a.strength.sub(.5)).smoothstep(a.blur.negate(),a.blur).oneMinus();var s=w.y.add(l.sub(.5)).smoothstep(-1,.5);return A(a.bottomColor,a.color,s).mul(t)}),mo),co={$name:"Translator",$positionNode:!0,$selectorPlanar:!0,distance:new sa(-.5,0,.2),selectorCenter:new sa(0,0,0),selectorAngles:new da(0,0),selectorWidth:.7},vo=a((([a,e])=>{var o=Ma(a,e.selectorAngles,e.selectorCenter,e.selectorWidth);return ka(e.distance.mul(o)).mul(i(a,1)).xyz})),po=ja((a=>(a=Ba(a,co),vo(w,a))),co);po.normal=ja((a=>{a=Ba(a,co);var e=w,r=L.normalize().toVar(),n=C.normalize().mul(.01).toVar(),l=v(r,n).normalize().mul(.01).toVar(),t=vo(e,a),s=vo(e.add(n),a),d=vo(e.add(l),a),u=o(s,t),m=o(d,t);return f(v(u,m).normalize())}),co);var go={$name:"Voronoi cells",scale:2,variation:0,facet:0,color:new ta(0),background:new ta(12636415),seed:0},Vo=a((([a])=>a.add(x(a.mul(Math.PI))))),yo=ja((a=>{a=Ba(a,go);var e=w.mul(M(a.scale.div(2).add(.5))).add(a.seed).toVar(),o=e.round().toVar(),r=o.toVar(),t=l(1).toVar(),d=n().toVar(),u=l().toVar(),m=l(0).toVar();W(27,(()=>{var a=m.mod(3).sub(1),l=m.div(3).floor().mod(3).sub(1),i=m.div(9).floor().sub(1);d.assign(o.add(n(a,l,i))),u.assign(e.distance(Vo(d)).add(x(e).div(5))),s(u.lessThan(t),(()=>{t.assign(u),r.assign(d)})),m.addAssign(1)}));var i=x(r.mul(Math.PI)).toVar(),c=A(t,i.add(1).div(2),a.facet),v=A(a.color,a.background,c).toVar(),p=n(i.mul(16.8),i.mul(31.4159),i.mul(27.1828)).sin().add(1).div(2);return A(v,A(v,p,a.variation),a.variation)}),go),bo={$name:"Water Drops",$normalNode:!0,scale:1.4,density:.5,bump:.6,seed:0},wo=a((([a,e,o,r,n])=>{var l=x(a.add(n)).add(r).clamp(0,1);return l=m(l.mul(Math.PI)).add(1).pow(.5).toVar(),a.add(l.mul(e,o))})),ho=ja((a=>{a=Ba(a,bo);var e=w.mul(M(a.scale.div(1).add(1))).toVar(),r=L.normalize().toVar(),l=C.normalize().mul(.001).toVar(),t=v(r,l).normalize().mul(.001).toVar(),s=p(a.density,0,1,1.5,.7).toVar(),d=n(u(a.seed).mul(100),m(a.seed.div(2)).mul(100),u(a.seed.div(3)).mul(100)).toVar(),i=wo(e,r,a.bump,s,d),c=wo(e.add(l),r,a.bump,s,d),g=wo(e.add(t),r,a.bump,s,d),V=o(c,i),y=o(g,i);return f(v(V,y).normalize())}),bo),zo={$name:"Watermelon",scale:2,stripes:12,variation:.5,noise:.25,color:new ta("yellowgreen"),background:new ta("darkgreen"),flat:0,seed:0},fo=ja((a=>{a=Ba(a,zo);var e=d(a.flat,a.variation.mul(.85).add(.15),a.variation),o=w.mul(M(a.scale.div(4).add(2))).add(a.seed).toVar(),r=d(a.flat,F,D(w.normalize())).toVar(),l=r.x.mul(a.stripes.round(),d(a.flat,Math.PI,2*Math.PI)).add(x(o.mul(n(1,.3,1))).mul(2)).sin().add(.5).div(2).mul(r.y.remap(0,1,-Math.PI,Math.PI).cos().add(1.2).clamp(0,1)).add(e.mul(2,x(o.mul(1.5)).div(2))).add(e.mul(2,x(o.mul(4)).div(6))).toVar();return l.assign(l.mix(l.round(),.75).add(x(o.mul(2)).mul(a.noise,.5)).add(x(o.mul(3)).mul(a.noise,1)).add(x(o.mul(15)).mul(a.noise,.2)).clamp(0,1)),A(a.background,a.color,l).toVar()}),zo),xo={$name:"Wood",scale:2.5,rings:4.5,lengths:1,angle:0,fibers:.3,fibersDensity:10,color:new ta(.8,.4,0),background:new ta(.4,.1,0),seed:0},ko=ja((a=>{a=Ba(a,xo);var e=J(a.angle).toVar(),r=n(o(w.x.mul(m(e)),w.y.mul(u(e))),t(w.x.mul(u(e)),w.y.mul(m(e))),w.z).toVar(),s=r.mul(M(a.scale.sub(3)).mul(n(ea(a.lengths),4,ea(a.lengths)))).add(a.seed).toVar(),d=x(s).add(1).mul(10).mul(a.rings);d=d.add(d.cos()).cos().add(1).div(2);var i=l(0).toVar(),v=l(0).toVar(),p=M(a.scale.sub(2)).mul(n(1,a.fibersDensity,1)).toVar(),g=l(2).toVar();return W(10,(()=>{i.addAssign(c(g,x(r.mul(p).add(a.seed)))),v.addAssign(g),p.mulAssign(1.8),g.mulAssign(.6)})),i.assign(c(i,5).div(v).mul(10).sin().add(1).div(2)),A(a.color,a.background,A(d,i,a.fibers))}),xo),Mo={$name:"Zebra lines",scale:2,thinness:.5,phi:0,theta:0,color:new ta(0),background:new ta(16777215),flat:0},$o=ja((a=>{a=Ba(a,Mo);var e=d(a.flat,w,w.normalize()).toVar(),o=d(a.flat,oa(m(a.phi),u(a.phi)),va(a.phi,a.theta)).toVar(),r=d(a.flat,j(o.dot(e),-2,2),E(j(o.dot(e),-1,1))).toVar(),n=M(a.scale.add(1)).toVar(),l=u(r.mul(n)).sub(a.thinness.sub(.5).mul(2));return l=j(l.mul(1e3).div(n),-1,1).mul(.5).add(.5),A(a.background,a.color,l)}),Mo),Ao={$name:"Circle decor",scale:2,grains:.2,complexity:1,blur:.2,color:new ta(0),background:new ta(16777215),seed:0},So=ja((a=>{a=Ba(a,Ao);var e=w.mul(M(a.scale.div(4))).add(a.seed).toVar(),o=e.mul(2).toVar(),r=_(e),n=_(o),l=_(e.mul(a.grains.mul(4).add(2))).mul(2),t=x(e).div(2).add(1),s=r.min(n,l).clamp(0,1).mul(a.complexity.add(2).exp(),t,Math.PI).sin().smoothstep(a.blur.negate(),a.blur);return A(a.color,a.background,s.oneMinus())}),Ao),Io={$name:"Reticular veins",scale:2,reticulation:5,strength:.2,organelles:.2,color:new ta(16777200),background:new ta(2129952),seed:0},Po=ja((a=>{a=Ba(a,Io);var e=w.mul(M(a.scale.div(2).add(.5))).add(a.seed).toVar(),o=_(e.mul(1)),r=_(e.add(100).mul(a.reticulation)).mul(a.strength),n=x(e.mul(100)).mul(a.strength,a.organelles),l=o.add(r).add(n);return A(a.background,a.color,l)}),Io),To={$name:"Roman paving",scale:2,depth:.5,seed:0},Bo=ja((a=>{a=Ba(a,To);var e=w.mul(M(a.scale)).add(a.seed).toVar(),o=ra(e).toVar();return o.y.sub(o.x).pow(a.depth.mul(3).sub(3).exp()).smoothstep(0,1)}),To),Eo={$name:"Crumpled fabric",$width:260,scale:2,pinch:.5,color:new ta(11596031),subcolor:new ta(4210928),background:new ta(12288),seed:0},jo=ja((a=>{a=Ba(a,Eo);var e=w.mul(M(a.scale.sub(.5))).add(a.seed).toVar();W(4,(()=>{var o=x(e.xyz).mul(a.pinch),r=x(e.yzx).mul(a.pinch),l=x(e.zxy).mul(a.pinch);e.addAssign(n(o,r,l))}));var o=x(e).add(1).div(2).clamp(0,1),r=a.color.mul(o.mul(2).sub(1).abs().oneMinus()),l=a.subcolor.mul(o).pow(2),t=a.background.mul(o.oneMinus().pow(2));return r.add(l).add(t)}),Eo),Lo={$name:"Isolayers",scale:2,layers:10,edge:.5,darkness:0,color:new ta(16777200),background:new ta(16728128),seed:0},Co=ja((a=>{a=Ba(a,Lo);var e=w.mul(M(a.scale.sub(1))).add(a.seed).toVar(),o=a.edge.remap(0,1,40,10),r=x(e).mul(1.2).add(1).div(2),n=r.mul(a.layers).round().div(a.layers).clamp(0,1),t=r.sub(l(.53).div(a.layers)).mul(a.layers).fract().mul(l(2).pow(o.reciprocal())).pow(o).sub(1).abs().oneMinus(),s=A(ia(a.background),ia(a.color),n).toVar();return s.z.mulAssign(A(1,n.mul(1.5),a.darkness).clamp(0,1)),ma(s.x,s.y,s.z).sub(t)}),Lo),Wo={$name:"Turbulent smoke",$width:260,scale:2,speed:0,details:5,seed:0},Ro=ja((a=>{a=Ba(a,Wo);var e=w.mul(M(a.scale.sub(1))).add(a.seed).toVar(),o=S.mul(a.speed.sub(1).exp()),r=e.add(n($(e.add(n(1,o.sin(),-1))),$(e.add(n(o.add(2*Math.PI/3).sin(),1,-1))),$(e.add(n(1,-1,o.add(4*Math.PI/3).sin()))))),l=na(r,a.details);return _(e.add(l.div(2))).pow(4).mul(4).oneMinus()}),Wo),qo={$name:"Caustics",scale:2,speed:0,color:new ta(5286080),seed:0},Go=ja((a=>{a=Ba(a,qo);var e=w.mul(M(a.scale.sub(1))).add(a.seed).toVar(),o=S.mul(a.speed.sub(1).exp()).add(n(0,2*Math.PI/3,4*Math.PI/3)).sin();return la(e.add(n(_(e.add(o.xyz)),_(e.add(o.yzx)),_(e.add(o.zxy))))).length().div(Math.sqrt(3)).add(a.color.sub(.5).mul(2))}),qo),Fo={$name:"Bricks",scale:2,brickSize:new sa(2,1,2),brickShift:2,jointSize:.05,jointSpan:.5,jointJitter:.5,jointBlur:.03,noiseSize:.5,noiseStrength:.2,colorShade:.5,color:new ta(16728064),additional:new ta(13672496),background:new ta(11184810),seed:0},Do=ja((a=>{a=Ba(a,Fo);var e=w.mul(M(a.scale)).add(a.seed).toVar(),o=a.brickSize,r=e.div(o).floor().div(a.brickShift),t=n(r.y,0,r.y).toVar(),s=e.div(o).fract().add(t).fract().toVar(),d=na(e.mul(ya(a.jointSpan,0,1,20,.2))).div(ya(a.jointJitter,0,1,500,1)).toVar(),u=c(s.mul(o).add(d.z).smoothstep(o.y.sub(a.jointSize,a.jointBlur),o.y.sub(a.jointSize)).y.oneMinus(),s.mul(o).add(d.y).smoothstep(a.jointSize,a.jointSize.add(a.jointBlur)).y,s.mul(o).add(d.y).smoothstep(o.x.sub(a.jointSize,a.jointBlur),o.x.sub(a.jointSize)).x.oneMinus(),s.mul(o).add(d.x).smoothstep(a.jointSize,a.jointSize.add(a.jointBlur)).x,s.mul(o).add(d.x).smoothstep(o.z.sub(a.jointSize,a.jointBlur),o.z.sub(a.jointSize)).z.oneMinus(),s.mul(o).add(d.z).smoothstep(a.jointSize,a.jointSize.add(a.jointBlur)).z).clamp(0,1),m=A(l(1),x(x(e.xyz.div(o).add(t).floor().zxy.mul(100).add(Math.PI)).mul(10)).add(2).div(2).pow(4).clamp(0,1),a.colorShade),i=x(e.mul(ya(a.noiseSize,0,1,5,250))).mul(a.noiseStrength).add(1),v=x(x(e.xyz.div(o).add(t).floor().zxy.mul(200).add(Math.PI)).mul(10)).add(1).div(1),p=A(a.color,a.additional,v.pow(2));return A(a.background,m.mul(p,u),u).mul(i)}),Fo);export{ja as TSLFn,pa as applyEuler,La as brain,Do as bricks,Ca as camouflage,Go as caustics,Ra as caveArt,So as circleDecor,Ga as circles,Na as clouds,Oa as concrete,Ba as convertToNodes,Ja as cork,jo as crumpledFabric,_a as dalmatianSpots,Qa as darthMaul,ca as dynamic,ne as dysonSphere,te as entangled,de as fordite,me as gasGiant,ce as grid,Ta as hideFallbackWarning,ma as hsl,Co as isolayers,pe as isolines,Ve as karstRock,be as marble,wa as matRotX,ha as matRotY,fa as matRotYXZ,za as matRotZ,xa as matScale,ka as matTrans,he as neonLights,Ea as noised,Aa as normalVector,$a as overlayPlanar,fe as photosphere,ke as planet,Ae as polkaDots,Ie as processedWood,Be as protozoa,ya as remapExp,Po as reticularVeins,Bo as romanPaving,Le as rotator,Re as roughClay,Ge as runnyEggs,Ye as rust,Oe as satin,Je as scaler,_e as scepterHead,Qe as scream,Ma as selectPlanar,Pa as showFallbackWarning,eo as simplexNoise,va as spherical,ro as stars,lo as staticNoise,uo as supersphere,io as tigerFur,ia as toHsl,po as translator,Ro as turbulentSmoke,ba as vnoise,yo as voronoiCells,ho as waterDrops,fo as watermelon,ko as wood,$o as zebraLines};
