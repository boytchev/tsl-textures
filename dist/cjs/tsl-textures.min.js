/*! TSL Textures v2.2.1 */
"use strict";var o=require("three/tsl"),e=require("three");const a=o.Fn((([e,a,t,r])=>{var s=r.add(e.mul(12)).mod(12),n=a.mul(o.min(t,o.sub(1,t)));return t.sub(n.mul(o.max(-1,o.min(o.min(s.sub(3),o.sub(9,s)),1))))}));a.setLayout({name:"hslHelper",type:"float",inputs:[{name:"h",type:"float"},{name:"s",type:"float"},{name:"l",type:"float"},{name:"n",type:"float"}]});const t=o.Fn((([e,t,r])=>{e=e.fract().add(1).fract(),t=t.clamp(0,1),r=r.clamp(0,1);var s=a(e,t,r,0),n=a(e,t,r,8),l=a(e,t,r,4);return o.vec3(s,n,l)}));t.setLayout({name:"hsl",type:"vec3",inputs:[{name:"h",type:"float"},{name:"s",type:"float"},{name:"l",type:"float"}]});const r=o.Fn((([e])=>{var a=o.float(e.x).toVar(),t=o.float(e.y).toVar(),r=o.float(e.z).toVar(),s=o.max(a,o.max(t,r)).toVar(),n=o.min(a,o.min(t,r)).toVar(),l=o.float(0).toVar(),i=o.float(0).toVar(),m=o.add(s,n).div(2);return o.If(n.notEqual(s),(()=>{const e=o.sub(s,n).toVar();i.assign(o.select(m.lessThanEqual(.5),e.div(o.add(n,s)),e.div(o.sub(2,o.add(n,s))))),o.If(s.equal(a),(()=>{l.assign(o.sub(t,r).div(e).add(o.select(t.lessThanEqual(r),6,0)))})).ElseIf(s.equal(t),(()=>{l.assign(o.sub(r,a).div(e).add(2))})).Else((()=>{l.assign(o.sub(a,t).div(e).add(4))})),l.divAssign(6)})),o.vec3(l,i,m)}));r.setLayout({name:"toHsl",type:"vec3",inputs:[{name:"rgb",type:"vec3"}]});const s=o.Fn((([e,a])=>o.vec3(o.sin(a).mul(o.sin(e)),o.cos(e),o.cos(a).mul(o.sin(e)))));s.setLayout({name:"spherical",type:"vec3",inputs:[{name:"phi",type:"float"},{name:"theta",type:"float"}]});const n=o.Fn((([o,e])=>{var a=l(e);return i(o,a)}));n.setLayout({name:"applyEuler",type:"vec4",inputs:[{name:"vec",type:"vec3"},{name:"eu",type:"vec3"}]});const l=o.Fn((([e])=>{var a=o.cos(e.x.div(2)),t=o.cos(e.y.div(2)),r=o.cos(e.z.div(2)),s=o.sin(e.x.div(2)),n=o.sin(e.y.div(2)),l=o.sin(e.z.div(2));return o.vec4(o.add(o.mul(s,t,r),o.mul(a,n,l)),o.sub(o.mul(a,n,r),o.mul(s,t,l)),o.add(o.mul(a,t,l),o.mul(s,n,r)),o.sub(o.mul(a,t,r),o.mul(s,n,l)))}));l.setLayout({name:"quaternionFromEuler",type:"vec4",inputs:[{name:"eu",type:"vec3"}]});const i=o.Fn((([e,a])=>{var t=o.cross(a.xyz,e).mul(2).toVar();return o.add(e,t.mul(a.w),o.cross(a.xyz,t))}));i.setLayout({name:"applyQuaternion",type:"vec3",inputs:[{name:"vec",type:"vec3"},{name:"quat",type:"vec4"}]});const m=o.Fn((([e,a,t,r,s])=>(e=o.remap(e,a,t,0,1),e=o.pow(2,o.mul(e,o.log2(s.div(r))).add(o.log2(r))))));m.setLayout({name:"remapExp",type:"float",inputs:[{name:"x",type:"float"},{name:"fromMin",type:"float"},{name:"fromMax",type:"float"},{name:"toMin",type:"float"},{name:"toMax",type:"float"}]});const d=o.Fn((([e])=>e.dot(o.vec3(12.9898,78.233,-97.5123)).sin().mul(43758.5453).fract().mul(2).sub(1)));d.setLayout({name:"vnoise",type:"float",inputs:[{name:"v",type:"vec3"}]});const u=o.Fn((([e])=>{var a=e.cos().toVar(),t=e.sin().toVar();return o.mat4(1,0,0,0,0,a,t,0,0,t.negate(),a,0,0,0,0,1)}));u.setLayout({name:"matRotX",type:"mat4",inputs:[{name:"angle",type:"float"}]});const c=o.Fn((([e])=>{var a=e.cos().toVar(),t=e.sin().toVar();return o.mat4(a,0,t.negate(),0,0,1,0,0,t,0,a,0,0,0,0,1)}));c.setLayout({name:"matRotY",type:"mat4",inputs:[{name:"angle",type:"float"}]});const p=o.Fn((([e])=>{var a=e.cos().toVar(),t=e.sin().toVar();return o.mat4(a,t,0,0,t.negate(),a,0,0,0,0,1,0,0,0,0,1)}));p.setLayout({name:"matRotZ",type:"mat4",inputs:[{name:"angle",type:"float"}]});const x=o.Fn((([o])=>{var e=u(o.x),a=c(o.y),t=p(o.z);return a.mul(e).mul(t)}));x.setLayout({name:"matRotYXZ",type:"mat4",inputs:[{name:"angles",type:"vec3"}]});const v=o.Fn((([e])=>o.mat4(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)));v.setLayout({name:"matScale",type:"mat4",inputs:[{name:"scales",type:"vec3"}]});const f=o.Fn((([e])=>o.mat4(1,0,0,0,0,1,0,0,0,0,1,0,e.x,e.y,e.z,1)));f.setLayout({name:"matTrans",type:"mat4",inputs:[{name:"vector",type:"vec3"}]});const y=o.Fn((([e,a,t,r])=>{var n=s(a.x,a.y).mul(r).toVar(),l=t.sub(n.div(2)).sub(e).dot(n).div(n.dot(n)).negate();return o.smoothstep(0,1,l)}));y.setLayout({name:"selectPlanar",type:"float",inputs:[{name:"pos",type:"vec3"},{name:"selAngles",type:"vec2"},{name:"selCenter",type:"vec3"},{name:"selWidth",type:"float"}]});const g=o.Fn((e=>{var a=y(o.positionGeometry,e.selectorAngles,e.selectorCenter,e.selectorWidth).sub(.5).mul(2).abs().oneMinus().pow(.25).negate().mul(e.selectorShow);return o.vec3(0,a,a)})),V=o.Fn((([e])=>{var a=o.dFdx(e),t=o.dFdy(e);return o.transformNormalToView(o.cross(a,t).normalize())}));V.setLayout({name:"normalVector",type:"vec3",inputs:[{name:"pos",type:"vec3"}]});var b=null,w=10;function _(a,t){var r=[];for(var s of a)if(s&&"object"==typeof s){r=Object.keys(s);break}var n={...t};for(var l of r)void 0!==a[l]&&(n[l]=a[l]);for(var i of Object.keys(n))"number"==typeof n[i]?n[i]=o.float(n[i]):n[i]instanceof e.Color?n[i]=o.vec3(n[i].r,n[i].g,n[i].b):n[i]instanceof e.Vector3&&(n[i]=o.vec3(n[i].x,n[i].y,n[i].z));return n}function h(e,a=1,t=1,r=0){return o.mx_noise_float(e.mul(a,t).add(r))}function C(e,a,t=null){const r=o.Fn(e,t),s=new Map;s.set("defaults",a),s.set("opacity",null),s.set("roughness",null),s.set("normal",null);const n=function(){};return Object.setPrototypeOf(n,Object.getPrototypeOf(r.call)),new Proxy(n,{get:(o,e,a)=>"defaults"===e?s.get("defaults"):"opacity"===e?s.get("opacity"):"roughness"===e?s.get("roughness"):"normal"===e?s.get("normal"):"fn"===e?r:Reflect.get(r,e,a),set:(o,e,a,t)=>"defaults"===e?(s.set("defaults",a),!0):"opacity"===e?(s.set("opacity",a),!0):"roughness"===e?(s.set("roughness",a),!0):"normal"===e?(s.set("normal",a),!0):Reflect.set(r,e,a,t),apply:(o,e,a)=>Reflect.apply(r,e,a),getOwnPropertyDescriptor:(o,e)=>"defaults"===e?{value:s.get("defaults"),writable:!0,enumerable:!0,configurable:!0}:("opacity"===e&&Reflect.getOwnPropertyDescriptor(null,e),"roughness"===e&&Reflect.getOwnPropertyDescriptor(null,e),"normal"===e&&Reflect.getOwnPropertyDescriptor(null,e),Reflect.getOwnPropertyDescriptor(r,e))})}var z={$name:"Brain",scale:2,smooth:.5,wave:.5,speed:2.5,color:new e.Color(16765136),background:new e.Color(5242880),seed:0},G=C((e=>{e=_(e,z);var a=o.positionGeometry.mul(o.exp(e.scale.div(3))).add(e.seed).toVar(),t=o.exp(e.smooth.oneMinus().mul(2)),r=o.mx_fractal_noise_float(a.mul(5),t).add(1).div(2).clamp(0,1).pow(2);return o.mix(e.color,e.background,r)}),z);G.normal=C((e=>{e=_(e,z);var a=o.positionGeometry.mul(o.exp(e.scale.div(3))).add(e.seed).toVar(),t=o.exp(e.smooth.oneMinus().mul(2)),r=.01,s=o.mx_fractal_noise_float(a.mul(5),t),n=o.mx_fractal_noise_float(a.add(o.vec3(r,0,0)).mul(5),t).sub(s).div(r),l=o.mx_fractal_noise_float(a.add(o.vec3(0,r,0)).mul(5),t).sub(s).div(r),i=o.mx_noise_float(a.mul(e.wave.mul(5))).add(1).div(2).mul(6.28);return o.vec3(n,l,o.time.mul(e.speed).add(i).sin().add(s,1)).normalize()}),z);var k={$name:"Camouflage",scale:2,colorA:new e.Color(12762792),colorB:new e.Color(10258782),colorC:new e.Color(9610101),colorD:new e.Color(7435617),seed:0},M=C((e=>{e=_(e,k);var a=o.positionGeometry.mul(o.exp(e.scale)).add(e.seed).toVar(),t=o.vec3(0,0,0).toVar();return o.If(o.round(o.mx_noise_float(a,1,.2)).greaterThanEqual(1),(()=>{t.assign(e.colorA)})).ElseIf(o.round(o.mx_noise_float(a.yzx,1,.3)).greaterThanEqual(1),(()=>{t.assign(e.colorB)})).ElseIf(o.round(o.mx_noise_float(a.zxy,1,.4)).greaterThanEqual(1),(()=>{t.assign(e.colorC)})).Else((()=>{t.assign(e.colorD)})),t}),k),A={$name:"Cave art",scale:2,thinness:2,noise:.3,color:new e.Color(13845829),background:new e.Color(16775408),seed:0},L=C((e=>{e=_(e,A);var a=o.positionGeometry.mul(o.exp(e.scale)).add(e.seed).toVar(),t=o.mx_noise_float(a,4).sin().toVar(),r=o.mx_noise_float(a.mul(1.5),4).cos().toVar(),s=o.exp(o.sub(o.float(3),e.thinness)),n=o.sub(s,o.pow2(o.abs(o.add(t,r))).mul(20)).toVar();return o.If(o.or(t.greaterThan(r),n.lessThan(0)),(()=>{n.assign(0)})),o.If(n.lessThanEqual(0),(()=>{n.assign(e.noise.mul(o.pow2(o.mx_noise_float(a.mul(30)))))})),o.mix(e.background,e.color,n)}),A),$={$name:"Circles",scale:2,variety:1,color:new e.Color(15786192),flat:0,seed:0},F=C((e=>{e=_(e,$);for(var a=o.select(e.flat,o.positionGeometry,o.positionGeometry.normalize()),s=o.acos(o.clamp(a.y,-1,1)).mul(20),n=o.exp(e.scale.sub(1)),l=s.div(3e3).mul(n),i=o.float(e.seed.sin().mul(100)).toVar(),m=0;m<=10;m++)i.addAssign(o.sin(l.mul(2**m).sub(Math.PI*m/2)).mul(-m*(m+1)/2));i.assign(i.div(200).clamp(-2,2));var d=r(e.color),u=d.x.add(i.mul(e.variety)).mod(1).mul(10),c=u.floor(),p=u.sub(c);return p=o.select(p.lessThan(.5),p.pow(1.5),p.pow(1/1.5)),t(c.add(p).div(10),d.y,d.z)}),$),I={$name:"Clouds",scale:2,density:.5,opacity:1,color:new e.Color(16777215),subcolor:new e.Color(10526896),seed:0},P=o.Fn((e=>{const a=o.positionGeometry,t=o.exp(e.scale.div(1.5).sub(.5)),r=o.add(h(a,t,1,e.seed),h(a,t,2,e.seed).mul(.8),h(a,t,6,e.seed).mul(.1),h(a,t,8,e.seed).mul(.07,e.opacity),e.density.remap(0,1,-.5,1.5)),s=o.clamp(0,1,o.mul(r,2).pow(1.5).sub(1).mul(e.opacity));return o.vec4(o.mix(e.subcolor,e.color,r.clamp(0,1)),s)})),T=C((o=>(o=_(o,I),P(o).rgb)),I);T.opacity=C((o=>(o=_(o,I),P(o).a)),I);var S={$name:"Concrete",$normalNode:!0,scale:2,density:.5,bump:.5,seed:0},E=o.Fn((([e,a,t,r,s])=>{var n=o.mx_noise_float(e.add(s)).mul(.5).add(.5);return n=t.mul(o.pow(o.abs(n),r)),e.add(n.mul(a))})),R=C((e=>{e=_(e,S);var a=o.positionGeometry.mul(o.exp(e.scale.div(2).add(2))).toVar(),t=o.normalLocal.normalize().toVar(),r=o.tangentLocal.normalize().mul(.001).toVar(),s=o.cross(t,r).normalize().mul(.001).toVar(),n=o.remap(e.density,0,1,10,.5).toVar(),l=o.vec3(o.sin(e.seed).mul(100),o.cos(e.seed.div(2)).mul(100),o.sin(e.seed.div(3)).mul(100)).toVar(),i=E(a,t,e.bump,n,l),m=E(a.add(r),t,e.bump,n,l),d=E(a.add(s),t,e.bump,n,l),u=o.sub(m,i),c=o.sub(d,i);return o.transformNormalToView(o.cross(u,c).normalize())}),S),B={$name:"Cork",scale:1,straight:1,noise:.3,color:new e.Color(16773312),background:new e.Color(13664352),seed:0},W=o.Fn((([o])=>o.add(d(o)))),q=C((e=>{e=_(e,B);var a=o.positionGeometry.mul(o.exp(e.scale.div(1.5).add(1))).add(e.seed).toVar(),t=a.round().toVar(),r=t.toVar(),s=o.float(1).toVar(),n=o.vec3().toVar(),l=o.float().toVar(),i=o.float(0).toVar();o.Loop(27,(()=>{var m=i.mod(3).sub(1),d=i.div(3).floor().mod(3).sub(1),u=i.div(9).floor().sub(1);n.assign(t.add(o.vec3(m,d,u))),l.assign(a.distance(W(n))),l.addAssign(o.mx_noise_float(a.add(n)).div(e.straight.exp())),o.If(l.lessThan(s),(()=>{s.assign(l),r.assign(n)})),i.addAssign(1)}));var m=o.mx_noise_float(r.mul(Math.PI)).toVar(),d=o.mx_noise_float(a.mul(12)).toVar();d.assign(d.sign().mul(d.abs().pow3())),d.addAssign(o.mx_noise_float(a.mul(40)).div(3));var u=m.add(1).div(2);return o.mix(e.color,e.background,u.add(d.mul(e.noise))).toVar()}),B),N={$name:"Dalmatian spots",$width:260,scale:2,density:.6,color:new e.Color(16777215),background:new e.Color(0),seed:0},D=C((e=>{e=_(e,N);var a=o.positionGeometry.mul(o.exp(e.scale)).add(e.seed).sub(1e3).toVar(),t=o.float(1).toVar(),r=o.float(1.5).sub(e.density).mul(2).toVar(),s=e.density.mul(5).add(5).toVar();return o.Loop(s,(()=>{t.mulAssign(o.mx_noise_float(a).abs().pow(r).mul(100).sub(50).clamp(0,1).oneMinus()),a.assign(a.mul(1.01)),t.mulAssign(o.mx_noise_float(a.yzx).abs().pow(r).mul(100).sub(50).clamp(0,1).oneMinus()),a.assign(a.mul(1.01)),t.mulAssign(o.mx_noise_float(a.zxy).abs().pow(r).mul(100).sub(50).clamp(0,1).oneMinus()),a.assign(a.mul(1.01))})),o.mix(e.background,e.color,t.clamp(0,1))}),N),O={$name:"Darth Maul",scale:2,shift:new e.Vector3(0,0,0),complexity:0,angle:60,distance:1.9,color:new e.Color(15745088),background:new e.Color(0),balance:0,seed:0},U=C((e=>{e=_(e,O);var a=o.positionGeometry.add(e.shift).mul(o.exp(e.scale.div(1.5).sub(1))).sub(e.shift).mul(o.vec3(1,.5,.5)).toVar(),t=o.select(o.positionGeometry.y.mul(e.angle.radians().cos()).add(o.positionGeometry.z.mul(e.angle.radians().sin())).greaterThan(e.distance),1,0);a.x.assign(a.x.add(e.shift.x).abs()),a.y.addAssign(e.seed),a.z.mulAssign(e.shift.z);var r=o.mx_noise_float(a).toVar(),s=r.sin().mul(r.mul(e.complexity.mul(2).add(1).exp()).sin()).remap(0,.2,1,-1).greaterThan(e.balance).select(0,1),n=o.select(a.x.greaterThan(o.mx_noise_float(a.mul(2.3)).abs().mul(.5).add(.02)),1,0);return o.mix(e.background,e.color,s.mul(t).mul(n).clamp(0,1))}),O),Y={$name:"Dyson sphere",scale:2,complexity:2,variation:0,color:new e.Color(12636415),background:new e.Color(0),seed:0},j=o.Fn((([e])=>{var a=e.mul(5**.5).fract().toVar();return a.addAssign(a.dot(a.add(o.vec3(31.4159,27.1828,14.142)))),a.z.mul(a.x.add(a.y)).fract().mul(2).sub(1)})),H=o.Fn((([e])=>{var a=e.oneMinus().clamp(0,1).toVar();return a.mul(a).mul(o.float(3).sub(a.mul(2)))})),Z=o.Fn((([e])=>{var a=e.x.floor().toVar(),t=a.add(1).toVar(),r=e.y.floor().toVar(),s=r.add(1).toVar(),n=e.z.floor().toVar(),l=n.add(1).toVar(),i=H(e.x.fract()).toVar(),m=H(e.y.fract()).toVar(),d=H(e.z.fract()).toVar(),u=H(i.oneMinus()).toVar(),c=H(m.oneMinus()).toVar(),p=H(d.oneMinus()).toVar(),x=j(o.vec3(a,r,n)).mul(u).mul(c).mul(p).toVar(),v=j(o.vec3(a,r,l)).mul(u).mul(c).mul(d).toVar(),f=j(o.vec3(a,s,n)).mul(u).mul(m).mul(p).toVar(),y=j(o.vec3(a,s,l)).mul(u).mul(m).mul(d).toVar(),g=j(o.vec3(t,r,n)).mul(i).mul(c).mul(p).toVar(),V=j(o.vec3(t,r,l)).mul(i).mul(c).mul(d).toVar(),b=j(o.vec3(t,s,n)).mul(i).mul(m).mul(p).toVar(),w=j(o.vec3(t,s,l)).mul(i).mul(m).mul(d).toVar();return x.add(v).add(f).add(y).add(g).add(V).add(b).add(w)})),X=C((e=>{e=_(e,Y);var a=o.positionGeometry.mul(o.exp(e.scale.div(2).add(.5))).add(e.seed).toVar(),t=o.vec3().toVar(),r=o.float(1).toVar();return o.Loop(e.complexity.add(4),(()=>{t.addAssign(Z(a.mul(r))),r.addAssign(r)})),o.mix(e.background,e.color,t.x.add(1).div(5))}),Y),K={$name:"Entangled",scale:2,density:10,color:new e.Color(8256),background:new e.Color(16777215),seed:0},Q=C((e=>{e=_(e,K);var a=o.exp(e.scale.div(2)).toVar(),t=o.positionGeometry.add(e.seed).toVar(),r=o.float(-1e4).toVar(),s=o.float(0).toVar();return o.Loop(o.floor(o.float(e.density)),(()=>{s.assign(o.sin(o.mx_noise_float(o.mul(t,a)).mul(3*Math.PI))),r.assign(o.max(r,s)),a.mulAssign(1.2)})),r.assign(o.oneMinus(o.pow(o.abs(r),5)).mul(6)),o.mix(e.color,e.background,r)}),K),J={$name:"Fordite",scale:2,color:new e.Color(0,0,0),seed:0},oo=C((e=>{e=_(e,J);var a=o.positionGeometry.mul(o.exp(e.scale)).add(e.seed).toVar(),r=o.mx_noise_float(o.vec3(o.mx_noise_float(a),o.mx_noise_float(a).mul(2),o.mx_noise_float(a).mul(3))).toVar();return t(r,1,o.sin(o.mul(r,Math.PI,4)).mul(.5).add(.5)).add(e.color)}),J),eo={$name:"Gas giant",scale:2,turbulence:.3,blur:.6,colorA:new e.Color(16775408),colorB:new e.Color(15788208),colorC:new e.Color(11509968),seed:0},ao=C((e=>{var a=(e=_(e,eo)).scale.div(2).add(1).toVar(),s=o.positionGeometry.mul(o.exp(a)).add(e.seed).toVar(),n=e.turbulence.mul(o.mx_noise_float(o.vec3(0,s.y.mul(.5),0).add(1)).add(o.mx_noise_float(o.vec3(0,s.y.mul(1),0).add(1)).mul(.5),o.mx_noise_float(o.vec3(1,s.y.mul(2),1).add(1)).mul(.25))).mul(5).abs().toVar(),l=o.mx_noise_float(s.div(4)).add(1).div(2).pow(10).mul(10).smoothstep(0,1);s.addAssign(o.vec3(o.mx_noise_float(s),o.mx_noise_float(s.yxz),o.mx_noise_float(s.yzx)).mul(n.mul(l.mul(2).exp())));var i=e.blur.pow(.2).oneMinus().mul(n.add(1)).toVar(),m=o.mx_noise_float(s.mul(o.vec3(0,a,0)));m=(m=m.add(o.mx_noise_float(s.mul(o.vec3(1,15,1))).mul(i))).add(-.5).smoothstep(-1,1).oneMinus();var d=o.mx_noise_float(o.vec3(0,s.y.mul(.75),0)).add(1),u=r(o.mix(e.colorB,e.colorA,d)),c=t(u.x.add(o.mx_noise_float(s.mul(o.vec3(0,a,0))).div(4)),u.y,u.z).toVar();return c.assign(o.mix(c,e.colorC,n.mul(.3))),c.mul(m)}),eo),to={$name:"Grid",countU:32,countV:16,thinness:.8,color:new e.Color(0),background:new e.Color(16777215),flat:0},ro=C((e=>{e=_(e,to);var a=o.select(e.flat,o.screenSize.x.div(o.screenSize.y),2),t=o.select(e.flat,o.screenUV,o.equirectUV(o.positionGeometry.normalize())).toVar(),r=o.mul(t.x,a,Math.PI),s=o.mul(t.y,Math.PI).toVar(),n=o.div(o.round(o.mul(t.x,e.countU)),e.countU),l=o.div(o.round(o.mul(t.y,e.countV)),e.countV),i=o.mul(n,a,Math.PI),m=o.mul(l,Math.PI),d=o.abs(o.sub(r,i)).mul(o.select(e.flat,1,o.sin(s))),u=o.abs(o.sub(s,m)),c=o.min(d,u),p=o.mul(o.min(o.div(a.mul(Math.PI),e.countU),o.div(Math.PI,e.countV)),o.remapClamp(o.pow(e.thinness,.5),0,1,.9,.04),.5),x=o.oneMinus(o.smoothstep(o.sub(p,.002),o.add(p,.002),c));return o.mix(e.background,e.color,x)}),to),so={$name:"Isolines",scale:2,density:40,blur:.3,thinness:.6,color:new e.Color(16777215),background:new e.Color(0),seed:0},no=C((e=>{e=_(e,so);var a=o.positionGeometry.mul(o.exp(e.scale)).add(e.seed).toVar(),t=o.mx_noise_float(a).mul(e.density);return t=o.oneMinus(o.sin(t)).div(2),t=o.smoothstep(o.sub(e.thinness,e.blur),o.add(e.thinness,e.blur),t),o.mix(e.color,e.background,t)}),so),lo={$name:"Karst rock",scale:2,color:new e.Color(16774384),background:new e.Color(13684944),seed:0},io=C((e=>{e=_(e,lo);var a=o.positionGeometry.mul(o.exp(e.scale)).add(e.seed.sin().mul(5)).toVar(),t=a.add(o.mx_noise_float(a.mul(2))).toVar(),r=o.mx_noise_float(t).div(o.mx_noise_float(t.mul(1.01))).clamp(0,2).toVar();return r.addAssign(o.mx_noise_float(a.mul(100)).div(3)),r.addAssign(o.mx_noise_float(a.mul(2)).div(2)),o.mix(e.background,e.color,r).mul(r.pow(.1))}),lo),mo={$name:"Marble",scale:1.2,thinness:5,noise:.3,color:new e.Color(4539859),background:new e.Color(15792383),seed:0},uo=C((e=>{e=_(e,mo);var a=o.positionGeometry.mul(o.exp(e.scale)).add(e.seed).toVar(),t=o.add(o.mx_noise_float(a),o.mx_noise_float(a.mul(2)).mul(.5),o.mx_noise_float(a.mul(6)).mul(.1)),r=(t=o.oneMinus(t.abs().pow(2.5)).toVar(),o.oneMinus(o.pow(.5,e.thinness.add(7))).toVar()),s=o.oneMinus(o.pow(.5,e.thinness.add(7).mul(.5))).toVar();return o.If(t.greaterThan(r),(()=>{t.assign(1)})).ElseIf(t.lessThan(s),(()=>{t.assign(0)})).Else((()=>{var e=t.sub(s),n=r.sub(s);t.assign(o.pow(o.div(e,n),5).mul(.75)),t.assign(t.mul(o.add(.5,o.mx_noise_float(a.mul(2)).mul(1.5))))})),t.assign(t.add(o.mul(e.noise,o.mx_noise_float(a.mul(150)).abs().pow3()))),o.mix(e.background,e.color,t)}),mo),co={$name:"Neon Lights",scale:1.5,thinness:.8,mode:0,colorA:new e.Color(16711680),colorB:new e.Color(65280),colorC:new e.Color(255),background:new e.Color(0),seed:0},po=C((e=>{e=_(e,co);var a=o.positionGeometry,s=o.exp(e.scale.remap(0,4,2,-2)).toVar(),n=o.exp(e.thinness.remap(0,1,1.5,0)).toVar(),l=e.background.toVar(),i=o.vec3(0).toVar(),m=o.mx_noise_float(a.xyz).toVar(),d=o.mx_noise_float(a.yzx).toVar(),u=o.mx_noise_float(a.zxy).toVar(),c=o.mx_noise_float(o.vec3(m,d,u).mul(s).add(e.seed)).toVar();c.assign(o.oneMinus(o.sqrt(o.abs(c))).pow(3)),i.assign(e.colorA);var p=r(i);i.assign(t(p.x,p.y,p.z.mul(c))),l.addAssign(o.select(e.mode.equal(0),i,i.negate()).mul(n)),c.assign(o.mx_noise_float(o.vec3(d,u,m).mul(s).sub(e.seed))),c.assign(o.oneMinus(o.sqrt(o.abs(c))).pow(3)),i.assign(e.colorB);p=r(i);i.assign(t(p.x,p.y,p.z.mul(c))),l.addAssign(o.select(e.mode.equal(0),i,i.negate()).mul(n)),c.assign(o.mx_noise_float(o.vec3(u,m,d.negate()).mul(s).add(e.seed))),c.assign(o.oneMinus(o.sqrt(o.abs(c))).pow(3)),i.assign(e.colorC);p=r(i);return i.assign(t(p.x,p.y,p.z.mul(c))),l.addAssign(o.select(e.mode.equal(0),i,i.negate()).mul(n)),l}),co),xo={$name:"Photosphere",scale:2,color:new e.Color(16776960),background:new e.Color(16711680),seed:0},vo=C((e=>{e=_(e,xo);var a=o.exp(e.scale.add(1)).toVar(),t=o.positionGeometry.toVar(),r=o.vec3(t).toVar();o.Loop(6,(()=>{r.assign(n(r,t.mul(a))),a.mulAssign(e.seed.mul(a).sin().mul(.05).add(1.1))}));var s=o.mx_noise_float(r).add(1).div(2);return o.mix(e.background,e.color,s)}),xo),fo={$name:"Planet",scale:2,iterations:5,levelSea:.3,levelMountain:.7,balanceWater:.3,balanceSand:.2,balanceSnow:.8,colorDeep:new e.Color(1194585).convertLinearToSRGB(),colorShallow:new e.Color(8900331).convertLinearToSRGB(),colorBeach:new e.Color(16775885).convertLinearToSRGB(),colorGrass:new e.Color(3978097).convertLinearToSRGB(),colorForest:new e.Color(12288).convertLinearToSRGB(),colorSnow:new e.Color(15794175).convertLinearToSRGB(),seed:0},yo=C((e=>{e=_(e,fo);var a=o.float(0).toVar(),t=o.float(0).toVar(),r=o.exp(e.scale.sub(2)).toVar(),s=o.float(2).toVar();o.Loop(e.iterations.add(10),(()=>{a.addAssign(o.mul(s,o.mx_noise_float(o.positionGeometry.mul(r).add(e.seed)))),t.addAssign(s),r.mulAssign(1.5),s.mulAssign(.8)})),a.assign(o.mul(a,a,.5).div(t));var n=e.levelSea.pow(2).toVar(),l=e.levelMountain.pow(2).toVar(),i=o.mix(n,l,e.balanceSand).toVar(),m=o.mix(n,i,.4).toVar(),d=o.mix(n,i,.6).toVar(),u=o.vec3().toVar();return o.If(a.lessThan(n),(()=>{u.assign(o.mix(e.colorDeep,e.colorShallow,o.remap(a,0,n,0,1).pow(o.exp(e.balanceWater.mul(-8).add(4)))))})).ElseIf(a.lessThan(m),(()=>{u.assign(o.mix(e.colorShallow,e.colorBeach,o.remap(a,n,m)))})).ElseIf(a.lessThan(d),(()=>{u.assign(e.colorBeach)})).ElseIf(a.lessThan(i),(()=>{u.assign(o.mix(e.colorBeach,e.colorGrass,o.remap(a,d,i)))})).ElseIf(a.lessThan(l),(()=>{u.assign(o.mix(e.colorGrass,e.colorForest,o.remap(a,i,l).pow(.75)))})).Else((()=>{var t=o.mix(1,l,e.balanceSnow);u.assign(o.mix(e.colorForest,e.colorSnow,o.smoothstep(o.mix(t,l,e.balanceSnow.pow(.5)),t,a)))})),u}),fo),go={$name:"Polka dots",count:2,size:.5,blur:.25,color:new e.Color(0),background:new e.Color(16777215),flat:0},Vo=(1+5**.5)/2,bo=C((e=>{e=_(e,go);var a=o.float(1).toVar();o.If(e.flat.equal(1),(()=>{var t=e.count.pow(2).sub(.5).toVar(),r=o.positionGeometry.xy.mul(t).mul(o.mat2(1,1,-1,1)),s=r.round().toVar();a.assign(r.distance(s).div(t))})).Else((()=>{var t=o.pow(10,e.count).toVar(),r=o.positionGeometry.normalize().toVar(),n=o.oneMinus(r.y).mul(t).sub(1).div(2),l=o.max(10,t.pow(.5)),i=n.sub(l).floor().clamp(0,t),m=n.add(l).floor().clamp(0,t);a.assign(1).toVar(),o.Loop(m.sub(i),(({i:e})=>{var n=o.add(e,i),l=o.mod(o.mul(2*Math.PI/Vo,n),2*Math.PI),m=o.acos(o.oneMinus(o.float(n).mul(2).add(1).div(t))),d=s(m,l);a.assign(o.min(a,o.distance(r,d)))}))}));var t=o.exp(e.size.mul(5).sub(5)).toVar(),r=e.blur.pow(4).toVar(),n=o.smoothstep(t.sub(r),t.add(r),a);return o.mix(e.color,e.background,n)}),go),wo={$name:"Processed wood",$width:260,scale:2,lengths:4,strength:.3,angle:0,color:new e.Color(7348256),background:new e.Color(15782048),seed:0},_o=C((e=>{e=_(e,wo);var a=o.radians(e.angle).toVar(),t=o.vec3(o.sub(o.positionGeometry.x.mul(o.cos(a)),o.positionGeometry.y.mul(o.sin(a))),o.add(o.positionGeometry.x.mul(o.sin(a)),o.positionGeometry.y.mul(o.cos(a))),o.positionGeometry.z).toVar(),r=e.scale.div(2).add(1).toVar(),s=t.mul(o.exp(r)).add(e.seed).toVar(),n=e.lengths.add(5).reciprocal().toVar(),l=o.mx_noise_float(s.mul(r,o.vec3(1,n,n)));return l=(l=l.mul(o.mx_noise_float(s.mul(o.vec3(25,1,1))).add(-1).mul(.2))).add(e.strength.sub(.5)).smoothstep(-.3,.3).oneMinus(),o.mix(e.color,e.background,l)}),wo),ho={$name:"Protozoa",scale:1.5,fat:.7,amount:.4,color:new e.Color(10526880),subcolor:new e.Color(14739711),background:new e.Color(15792383),seed:0},Co=o.Fn((([e,a])=>o.mx_noise_float(e).mul(a).clamp(-3.14,3.14).cos().add(1).div(2))),zo=C((e=>{e=_(e,ho);var a=o.positionGeometry.mul(o.exp(e.scale.sub(1))).add(e.seed).toVar(),t=o.vec3(o.matcapUV,o.matcapUV.length()).toVar(),r=o.float(0).toVar(),s=o.float(0).toVar(),n=o.float(0).toVar(),l=o.float(0).toVar(),i=e.fat.add(.2).oneMinus().mul(60).add(30).toVar(),m=o.float(2).toVar(),d=e.amount.div(2).add(.5).exp().toVar();return o.Loop(10,(()=>{r.assign(Co(a.xyz.add(t),i)),s.assign(Co(a.yzx.add(t),i)),n.addAssign(r.mul(s).mul(m)),l.addAssign(r.max(s).mul(m)),a.assign(o.mix(a.mul(d),0,.4)),m.mulAssign(.9)})),o.mix(e.background,o.mix(e.color,e.subcolor,l.mul(.1)),n)}),ho),Go={$name:"Rotator",$positionNode:!0,$selectorPlanar:!0,angles:new e.Vector3(.4,-.6,0),center:new e.Vector3(0,0,0),selectorCenter:new e.Vector3(0,0,0),selectorAngles:new e.Vector2(0,0),selectorWidth:2},ko=o.Fn((([e,a])=>{var t=y(e,a.selectorAngles,a.selectorCenter,a.selectorWidth),r=x(a.angles.mul(t)),s=f(a.center),n=f(a.center.negate());return s.mul(r).mul(n).mul(o.vec4(e,1)).xyz})),Mo=C((e=>(e=_(e,Go),ko(o.positionGeometry,e))),Go);Mo.normal=C((e=>{e=_(e,Go);var a=o.positionGeometry,t=o.normalLocal.normalize().toVar(),r=o.tangentLocal.normalize().mul(.01).toVar(),s=o.cross(t,r).normalize().mul(.01).toVar(),n=ko(a,e),l=ko(a.add(r),e),i=ko(a.add(s),e),m=o.sub(l,n),d=o.sub(i,n);return o.transformNormalToView(o.cross(m,d).normalize())}),Go);var Ao={$name:"Rough clay",$normalNode:!0,scale:2,bump:.5,curvature:.2,seed:0},Lo=o.Fn((([e,a,t,r])=>{var s=o.mx_worley_noise_float(e.add(o.mx_noise_float(e).mul(r))).add(.8).pow(5).toVar();return s.addAssign(s.pow(.5)),e.add(a.mul(s).mul(t))})),$o=C((e=>{var a=(e=_(e,Ao)).bump.div(50).toVar(),t=o.positionGeometry.mul(o.exp(e.scale.div(2))).add(e.seed.sin().mul(10)).toVar(),r=o.normalLocal.normalize().toVar(),s=o.tangentLocal.normalize().mul(.001).toVar(),n=o.cross(r,s).normalize().mul(.001).toVar(),l=Lo(t,r,a,e.curvature),i=Lo(t.add(s),r,a,e.curvature),m=Lo(t.add(n),r,a,e.curvature),d=o.sub(i,l),u=o.sub(m,l);return o.transformNormalToView(o.cross(d,u).normalize())}),Ao),Fo={$name:"Runny eggs",scale:1,sizeYolk:.2,sizeWhite:.7,colorYolk:new e.Color("orange"),colorWhite:new e.Color("white"),colorBackground:new e.Color("lightgray"),seed:0},Io=C((e=>{e=_(e,Fo);var a=o.positionGeometry.mul(o.exp(e.scale.div(1))).add(e.seed.sin().mul(10)).toVar(),t=e.sizeYolk.oneMinus(),r=e.sizeWhite.oneMinus(),s=o.mx_worley_noise_float(a).toVar(),n=s.add(r).pow(8).oneMinus().clamp(-.5,1),l=s.add(t).pow(18).oneMinus().clamp(0,1).pow(.4).clamp(0,1);return o.mix(e.colorBackground,o.mix(e.colorWhite,e.colorYolk,l),n)}),Fo),Po=o.Fn((([e,a,t,r,s])=>{var n=o.mx_worley_noise_float(e).toVar(),l=n.add(s).pow(8).oneMinus(),i=n.add(r).pow(18).oneMinus().clamp(0,1),m=o.mix(0,o.mix(0,1,i),l);return e.add(a.mul(m).mul(t))}));Io.normal=C((e=>{e=_(e,Fo);var a=.05,t=o.positionGeometry.mul(o.exp(e.scale.div(1))).add(e.seed.sin().mul(10)).toVar(),r=o.normalLocal.normalize().toVar(),s=o.tangentLocal.normalize().mul(.001).toVar(),n=o.cross(r,s).normalize().mul(.001).toVar(),l=e.sizeYolk.oneMinus(),i=e.sizeWhite.oneMinus(),m=Po(t,r,a,l,i),d=Po(t.add(s),r,a,l,i),u=Po(t.add(n),r,a,l,i),c=o.sub(d,m),p=o.sub(u,m);return o.transformNormalToView(o.cross(c,p).normalize())}),Fo),Io.roughness=C((e=>{e=_(e,Fo);var a=o.positionGeometry.mul(o.exp(e.scale.div(1))).add(e.seed.sin().mul(10)).toVar(),t=e.sizeYolk.oneMinus();return o.mx_worley_noise_float(a).toVar().add(t).pow(18).clamp(0,1)}),Fo);var To={$name:"rust",scale:2,iterations:8,amount:-.3,opacity:.5,noise:.5,noiseScale:.5,color:new e.Color(12615680),background:new e.Color(32),seed:0},So=o.Fn((e=>{var a=o.positionGeometry.mul(o.exp(e.scale.div(4).add(-1))).add(e.seed).toVar(),t=e.amount.mul(o.mx_noise_float(a.mul(e.amount.div(2).add(4))).add(4)).toVar(),r=o.mx_noise_float(a).toVar();return o.Loop(e.iterations,(()=>{a.mulAssign(2),r.addAssign(o.mx_noise_float(a))})),r.subAssign(o.mx_noise_float(a.mul(2)).abs()),r.assign(r.sub(t).clamp(0,15)),r})),Eo=C((e=>{e=_(e,To);var a=So(e).mul(1.25).pow(.5),t=o.positionGeometry.mul(o.exp(e.scale.add(e.noiseScale.mul(3),2)));return a.addAssign(e.noise.mul(o.mx_noise_float(t).abs().add(.1).pow(2))),o.mix(e.color,e.background,a)}),To);Eo.opacity=C((o=>(o=_(o,To),So(o).mul(o.opacity.add(.2)).oneMinus())),To);var Ro={$name:"Satin",scale:2,color:new e.Color(7373055),background:new e.Color(80),seed:0},Bo=C((e=>{e=_(e,Ro);var a=o.positionGeometry.toVar(),t=o.exp(e.scale.div(3)).toVar(),r=o.mx_noise_float(o.vec3(o.mx_noise_float(o.vec3(a.x.mul(2),a.y,a.z).mul(t)),o.mx_noise_float(o.vec3(a.x,a.y.mul(2),a.z).mul(t)),o.mx_noise_float(o.vec3(a.x,a.y,a.z.mul(2)).mul(t))).mul(t).add(e.seed));return r=o.pow(o.abs(r),3).mul(20),o.mix(e.background,e.color,r)}),Ro);Bo.defaults={$name:"Satin",scale:2,color:new e.Color(7373055),background:new e.Color(80),seed:0};var Wo={$name:"Scaler",$positionNode:!0,$selectorPlanar:!0,scales:new e.Vector3(.01,.9,1.7),center:new e.Vector3(0,0,0),selectorCenter:new e.Vector3(0,0,0),selectorAngles:new e.Vector2(0,0),selectorWidth:2},qo=o.Fn((([e,a])=>{var t=y(e,a.selectorAngles,a.selectorCenter,a.selectorWidth),r=v(o.mix(o.vec3(1,1,1),a.scales,t)),s=f(a.center),n=f(a.center.negate());return s.mul(r).mul(n).mul(o.vec4(e,1)).xyz})),No=C((e=>(e=_(e,Wo),qo(o.positionGeometry,e))),Wo);No.normal=C((e=>{e=_(e,Wo);var a=o.positionGeometry,t=o.normalLocal.normalize().toVar(),r=o.tangentLocal.normalize().mul(.01).toVar(),s=o.cross(t,r).normalize().mul(.01).toVar(),n=qo(a,e),l=qo(a.add(r),e),i=qo(a.add(s),e),m=o.sub(l,n),d=o.sub(i,n);return o.transformNormalToView(o.cross(m,d).normalize())}),Wo);var Do={$name:"Scepter head",xFactor:10,yFactor:22,zFactor:10,colorRim:new e.Color(16777215),colorA:new e.Color(7397631),colorB:new e.Color(3145983)},Oo=C((e=>{e=_(e,Do);var a=o.positionGeometry,s=a.x.mul(m(e.xFactor,0,100,1.35,30)).toVar(),n=a.y.mul(m(e.yFactor,0,100,1.35,30)).toVar(),l=a.z.mul(m(e.zFactor,0,100,1.35,30)).toVar(),i=o.cos(s).toVar(),d=o.cos(n).toVar(),u=o.cos(l).toVar(),c=o.mx_noise_float(o.vec3(a.x.div(i),a.y.div(d),a.z.div(u)));c=o.sign(c).mul(o.abs(c).pow(.75));var p=o.abs(o.mul(s,o.tan(s)).add(1).div(o.cos(s))),x=o.abs(o.mul(n,o.tan(n)).add(1).div(o.cos(n))),v=o.abs(o.mul(l,o.tan(l)).add(1).div(o.cos(l))),f=o.vec3().toVar(),y=o.abs(o.floor(s.mul(2/Math.PI).add(1).div(2))),g=o.abs(o.floor(n.mul(2/Math.PI).add(1).div(2))),V=o.abs(o.floor(l.mul(2/Math.PI).add(1).div(2))),b=o.mod(o.add(y,g,V),2);f.assign(r(o.mix(e.colorA,e.colorB,b)));var w=t(f.x,f.y,f.z.mul(c)).toVar();f.assign(r(e.colorRim));var h=t(f.x,f.y,o.mul(2,c,f.z)).toVar();return o.mix(w,h,o.remapClamp(o.max(p,o.max(x,v)),45,65))}),Do),Uo={$name:"Scream",scale:2,variety:1,color:new e.Color(15790176),background:new e.Color(13668496),seed:0},Yo=C((e=>{e=_(e,Uo);var a=o.positionGeometry.mul(o.exp(e.scale)).add(e.seed).toVar(),s=o.mx_noise_float(o.add(o.sin(a.xyz),o.cos(a.yzx)));a.assign(o.positionGeometry.mul(o.exp(e.scale).mul(s)).add(e.seed));s=o.mx_noise_float(o.add(o.sin(a.xyz),o.cos(a.yzx)).mul(2));var n=o.mix(e.background,e.color,s).toVar(),l=r(n).toVar();return t(o.add(l.x,e.variety.mul(o.sin(s.mul(Math.PI))).mul(.5)),l.y,l.z)}),Uo);Yo.defaults={$name:"Scream",scale:2,variety:1,color:new e.Color(15790176),background:new e.Color(13668496),seed:0};var jo={$name:"Simplex noise",scale:2,balance:0,contrast:0,color:new e.Color(16777215),background:new e.Color(0),seed:0},Ho=C((e=>{e=_(e,jo);var a=o.positionGeometry.mul(o.exp(e.scale)).add(e.seed),t=o.clamp(0,1,o.mx_noise_float(a).mul(.5,o.exp(e.contrast)).add(.5,e.balance));return o.mix(e.background,e.color,t)}),jo);Ho.defaults={$name:"Simplex noise",scale:2,balance:0,contrast:0,color:new e.Color(16777215),background:new e.Color(0),seed:0};var Zo={$name:"Stars",scale:2,density:2,variation:0,color:new e.Color(16774640),background:new e.Color(96),seed:0},Xo=C((e=>{e=_(e,Zo);var a=o.positionGeometry.mul(o.exp(e.scale.div(2).add(3))).add(e.seed).toVar(),s=o.abs(o.mx_noise_float(a)).pow(10).mul(10);s=s.mul(o.exp(e.density.sub(2)));var n=o.select(s.greaterThan(.1),e.variation.mul(o.mx_noise_float(a)),0),l=r(o.mix(e.background,e.color,s));return t(o.add(l.x,n),l.y,l.z)}),Zo),Ko={$name:"Supersphere",$positionNode:!0,exponent:3},Qo=o.Fn((([e,a])=>{var t=o.float(2).pow(a.exponent),r=e.div(e.length()).toVar(),s=r.x.abs().pow(t).add(r.y.abs().pow(t)).add(r.z.abs().pow(t)).pow(o.float(1).div(t));return r.div(s)})),Jo=C((e=>(e=_(e,Ko),Qo(o.positionGeometry,e))),Ko);Jo.normal=C((e=>{e=_(e,Ko);var a=o.positionGeometry,t=o.normalLocal.normalize().toVar(),r=o.tangentLocal.normalize().mul(.01).toVar(),s=o.cross(t,r).normalize().mul(.01).toVar(),n=Qo(a,e),l=Qo(a.add(r),e),i=Qo(a.add(s),e),m=o.sub(l,n),d=o.sub(i,n);return o.transformNormalToView(o.cross(m,d).normalize())}),Ko);var oe={$name:"Tiger fur",scale:2,lengths:4,blur:.3,strength:.3,hairs:.5,color:new e.Color(16755200),bottomColor:new e.Color(16777198),seed:0},ee=C((e=>{var a=(e=_(e,oe)).scale.div(2).add(1).toVar(),t=o.positionGeometry.mul(o.exp(a)).add(e.seed).toVar(),r=e.lengths.add(5).reciprocal().toVar(),s=e.hairs.mul(.3).toVar(),n=o.mx_noise_float(t.mul(a,o.vec3(1,r,r)));n=(n=n.add(o.mx_noise_float(t.mul(o.vec3(25,1,1))).add(1).mul(s))).add(e.strength.sub(.5)).smoothstep(e.blur.negate(),e.blur).oneMinus();var l=o.positionGeometry.y.add(s.sub(.5)).smoothstep(-1,.5);return o.mix(e.bottomColor,e.color,l).mul(n)}),oe),ae={$name:"Translator",$positionNode:!0,$selectorPlanar:!0,distance:new e.Vector3(-.5,0,.2),selectorCenter:new e.Vector3(0,0,0),selectorAngles:new e.Vector2(0,0),selectorWidth:.7},te=o.Fn((([e,a])=>{var t=y(e,a.selectorAngles,a.selectorCenter,a.selectorWidth);return f(a.distance.mul(t)).mul(o.vec4(e,1)).xyz})),re=C((e=>(e=_(e,ae),te(o.positionGeometry,e))),ae);re.normal=C((e=>{e=_(e,ae);var a=o.positionGeometry,t=o.normalLocal.normalize().toVar(),r=o.tangentLocal.normalize().mul(.01).toVar(),s=o.cross(t,r).normalize().mul(.01).toVar(),n=te(a,e),l=te(a.add(r),e),i=te(a.add(s),e),m=o.sub(l,n),d=o.sub(i,n);return o.transformNormalToView(o.cross(m,d).normalize())}),ae);var se={$name:"Voronoi cells",scale:2,variation:0,facet:0,color:new e.Color(0),background:new e.Color(12636415),seed:0},ne=o.Fn((([e])=>e.add(o.mx_noise_float(e.mul(Math.PI))))),le=C((e=>{e=_(e,se);var a=o.positionGeometry.mul(o.exp(e.scale.div(2).add(.5))).add(e.seed).toVar(),t=a.round().toVar(),r=t.toVar(),s=o.float(1).toVar(),n=o.vec3().toVar(),l=o.float().toVar(),i=o.float(0).toVar();o.Loop(27,(()=>{var e=i.mod(3).sub(1),m=i.div(3).floor().mod(3).sub(1),d=i.div(9).floor().sub(1);n.assign(t.add(o.vec3(e,m,d))),l.assign(a.distance(ne(n)).add(o.mx_noise_float(a).div(5))),o.If(l.lessThan(s),(()=>{s.assign(l),r.assign(n)})),i.addAssign(1)}));var m=o.mx_noise_float(r.mul(Math.PI)).toVar(),d=o.mix(s,m.add(1).div(2),e.facet),u=o.mix(e.color,e.background,d).toVar(),c=o.vec3(m.mul(16.8),m.mul(31.4159),m.mul(27.1828)).sin().add(1).div(2);return o.mix(u,o.mix(u,c,e.variation),e.variation)}),se),ie={$name:"Water Drops",$normalNode:!0,scale:1.4,density:.5,bump:.6,seed:0},me=o.Fn((([e,a,t,r,s])=>{var n=o.mx_noise_float(e.add(s)).add(r).clamp(0,1);return n=o.cos(n.mul(Math.PI)).add(1).pow(.5).toVar(),e.add(n.mul(a,t))})),de=C((e=>{e=_(e,ie);var a=o.positionGeometry.mul(o.exp(e.scale.div(1).add(1))).toVar(),t=o.normalLocal.normalize().toVar(),r=o.tangentLocal.normalize().mul(.001).toVar(),s=o.cross(t,r).normalize().mul(.001).toVar(),n=o.remap(e.density,0,1,1.5,.7).toVar(),l=o.vec3(o.sin(e.seed).mul(100),o.cos(e.seed.div(2)).mul(100),o.sin(e.seed.div(3)).mul(100)).toVar(),i=me(a,t,e.bump,n,l),m=me(a.add(r),t,e.bump,n,l),d=me(a.add(s),t,e.bump,n,l),u=o.sub(m,i),c=o.sub(d,i);return o.transformNormalToView(o.cross(u,c).normalize())}),ie),ue={$name:"Watermelon",scale:2,stripes:12,variation:.5,noise:.25,color:new e.Color("yellowgreen"),background:new e.Color("darkgreen"),flat:0,seed:0},ce=C((e=>{e=_(e,ue);var a=o.select(e.flat,e.variation.mul(.85).add(.15),e.variation),t=o.positionGeometry.mul(o.exp(e.scale.div(4).add(2))).add(e.seed).toVar(),r=o.select(e.flat,o.screenUV,o.equirectUV(o.positionGeometry.normalize())).toVar(),s=r.x.mul(e.stripes.round(),o.select(e.flat,Math.PI,2*Math.PI)).add(o.mx_noise_float(t.mul(o.vec3(1,.3,1))).mul(2)).sin().add(.5).div(2).mul(r.y.remap(0,1,-Math.PI,Math.PI).cos().add(1.2).clamp(0,1)).add(a.mul(2,o.mx_noise_float(t.mul(1.5)).div(2))).add(a.mul(2,o.mx_noise_float(t.mul(4)).div(6))).toVar();return s.assign(s.mix(s.round(),.75).add(o.mx_noise_float(t.mul(2)).mul(e.noise,.5)).add(o.mx_noise_float(t.mul(3)).mul(e.noise,1)).add(o.mx_noise_float(t.mul(15)).mul(e.noise,.2)).clamp(0,1)),o.mix(e.background,e.color,s).toVar()}),ue),pe={$name:"Wood",scale:2.5,rings:4.5,lengths:1,angle:0,fibers:.3,fibersDensity:10,color:new e.Color(.8,.4,0),background:new e.Color(.4,.1,0),seed:0},xe=C((e=>{e=_(e,pe);var a=o.radians(e.angle).toVar(),t=o.vec3(o.sub(o.positionGeometry.x.mul(o.cos(a)),o.positionGeometry.y.mul(o.sin(a))),o.add(o.positionGeometry.x.mul(o.sin(a)),o.positionGeometry.y.mul(o.cos(a))),o.positionGeometry.z).toVar(),r=t.mul(o.exp(e.scale.sub(3)).mul(o.vec3(o.reciprocal(e.lengths),4,o.reciprocal(e.lengths)))).add(e.seed).toVar(),s=o.mx_noise_float(r).add(1).mul(10).mul(e.rings);s=s.add(s.cos()).cos().add(1).div(2);var n=o.float(0).toVar(),l=o.float(0).toVar(),i=o.exp(e.scale.sub(2)).mul(o.vec3(1,e.fibersDensity,1)).toVar(),m=o.float(2).toVar();return o.Loop(10,(()=>{n.addAssign(o.mul(m,o.mx_noise_float(t.mul(i).add(e.seed)))),l.addAssign(m),i.mulAssign(1.8),m.mulAssign(.6)})),n.assign(o.mul(n,5).div(l).mul(10).sin().add(1).div(2)),o.mix(e.color,e.background,o.mix(s,n,e.fibers))}),pe),ve={$name:"Zebra lines",scale:2,thinness:.5,phi:0,theta:0,color:new e.Color(0),background:new e.Color(16777215),flat:0},fe=C((e=>{e=_(e,ve);var a=o.select(e.flat,o.positionGeometry,o.positionGeometry.normalize()).toVar(),t=o.select(e.flat,o.vec2(o.cos(e.phi),o.sin(e.phi)),s(e.phi,e.theta)).toVar(),r=o.select(e.flat,o.clamp(t.dot(a),-2,2),o.acos(o.clamp(t.dot(a),-1,1))).toVar(),n=o.exp(e.scale.add(1)).toVar(),l=o.sin(r.mul(n)).sub(e.thinness.sub(.5).mul(2));return l=o.clamp(l.mul(1e3).div(n),-1,1).mul(.5).add(.5),o.mix(e.background,e.color,l)}),ve);Object.defineProperty(exports,"noise",{enumerable:!0,get:function(){return o.mx_noise_float}}),exports.TSLFn=C,exports.applyEuler=n,exports.brain=G,exports.camouflage=M,exports.caveArt=L,exports.circles=F,exports.clouds=T,exports.concrete=R,exports.cork=q,exports.dalmatianSpots=D,exports.darthMaul=U,exports.dynamic=function(a){var t={};for(var[r,s]of Object.entries(a))"$"!=r[0]&&(s instanceof e.Vector3?t[r]=o.uniform(s,"vec3"):t[r]=o.uniform(s));return t},exports.dysonSphere=X,exports.entangled=Q,exports.fordite=oo,exports.gasGiant=ao,exports.grid=ro,exports.hideFallbackWarning=function(){b&&(w>0?w--:(b.style.display="none",b=null))},exports.hsl=t,exports.isolines=no,exports.karstRock=io,exports.marble=uo,exports.matRotX=u,exports.matRotY=c,exports.matRotYXZ=x,exports.matRotZ=p,exports.matScale=v,exports.matTrans=f,exports.neonLights=po,exports.noised=h,exports.normalVector=V,exports.overlayPlanar=g,exports.photosphere=vo,exports.planet=yo,exports.polkaDots=bo,exports.prepare=_,exports.processedWood=_o,exports.protozoa=zo,exports.remapExp=m,exports.rotator=Mo,exports.roughClay=$o,exports.runnyEggs=Io,exports.rust=Eo,exports.satin=Bo,exports.scaler=No,exports.scepterHead=Oo,exports.scream=Yo,exports.selectPlanar=y,exports.showFallbackWarning=async function(){if(null!=navigator.gpu&&await navigator.gpu.requestAdapter())return;(b=document.createElement("div")).innerHTML='\n\t<div style="font-size:1.25em; font-weight:bold;">PLEASE, WAIT</div>\n\t<div  style="font-size:0.85em; font-weight:100;" >NO WEBGPU &mdash; TRYING WEBGL2</div>\n\t<div id="counter"></div>\n\t',b.style.left="calc(50% - 8em)",b.style.width="16em",b.style.fontFamily="Bahnschrifts, Arial",b.style.position="absolute",b.style.bottom="20px",b.style.padding="12px 6px",b.style.border="1px solid white",b.style.borderRadius="4px",b.style.background="rgba(0,0,0,0.5)",b.style.color="white",b.style.textAlign="center",b.style.opacity="0.8",b.style.outline="none",b.style.zIndex="999",document.body.appendChild(b)},exports.simplexNoise=Ho,exports.spherical=s,exports.stars=Xo,exports.supersphere=Jo,exports.tigerFur=ee,exports.toHsl=r,exports.translator=re,exports.vnoise=d,exports.voronoiCells=le,exports.waterDrops=de,exports.watermelon=ce,exports.wood=xe,exports.zebraLines=fe;
